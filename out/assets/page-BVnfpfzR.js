import{u as fe,r as d,c as f,j as e,D as L}from"./index-CQa-GowG.js";function je(){const{user:p}=fe(),[g,M]=d.useState([]),[G,P]=d.useState(!0),[j,_]=d.useState(""),[N,V]=d.useState("all"),[$,C]=d.useState(!1),[B,w]=d.useState(!1),[U,A]=d.useState(!1),[z,S]=d.useState(!1),[u,O]=d.useState(null),[i,m]=d.useState(null),[J,X]=d.useState([]),[R,b]=d.useState(0),[k,T]=d.useState(!1),Q=d.useRef(null),[l,x]=d.useState({code:"",name:"",type:"asset",parentId:"",description:"",allowPosting:!0});d.useEffect(()=>{p&&h()},[p]);const h=async()=>{if(p){P(!0);try{const t=await f.getAll(p.id);M(t)}catch(t){console.error("Error loading accounts:",t)}finally{P(!1)}}},W=[{id:"csv",name:"CSV Estándar",description:"Formato CSV compatible con Excel y sistemas contables básicos",fileTypes:[".csv"],icon:"ri-file-text-line",color:"bg-green-100 text-green-800"},{id:"quickbooks",name:"QuickBooks",description:"Formato IIF de QuickBooks Desktop y Online",fileTypes:[".iif",".qbx",".csv"],icon:"ri-file-chart-line",color:"bg-blue-100 text-blue-800"},{id:"excel",name:"Microsoft Excel",description:"Archivos Excel con formato estructurado (.xlsx, .xls)",fileTypes:[".xlsx",".xls"],icon:"ri-file-excel-line",color:"bg-green-100 text-green-800"},{id:"sage",name:"Sage 50/100/200",description:"Formato de exportación de Sage Accounting",fileTypes:[".csv",".txt"],icon:"ri-file-list-line",color:"bg-purple-100 text-purple-800"},{id:"sap",name:"SAP Business One",description:"Formato XML/CSV de SAP para plan de cuentas",fileTypes:[".xml",".csv"],icon:"ri-file-code-line",color:"bg-orange-100 text-orange-800"},{id:"xero",name:"Xero Accounting",description:"Formato CSV de Xero para importación de cuentas",fileTypes:[".csv"],icon:"ri-cloud-line",color:"bg-indigo-100 text-indigo-800"},{id:"json",name:"JSON Universal",description:"Formato JSON para sistemas modernos y APIs",fileTypes:[".json"],icon:"ri-code-s-slash-line",color:"bg-gray-100 text-gray-800"},{id:"xml",name:"XML Estándar",description:"Formato XML compatible con múltiples sistemas ERP",fileTypes:[".xml"],icon:"ri-file-code-line",color:"bg-yellow-100 text-yellow-800"}],Y=[{value:"all",label:"Todos los Tipos"},{value:"asset",label:"Activos"},{value:"liability",label:"Pasivos"},{value:"equity",label:"Patrimonio"},{value:"income",label:"Ingresos"},{value:"expense",label:"Gastos"}],v=g.filter(t=>{const a=t.name.toLowerCase().includes(j.toLowerCase())||t.code.includes(j),s=N==="all"||t.type===N;return a&&s}),H=t=>{switch(t){case"asset":return"bg-blue-100 text-blue-800";case"liability":return"bg-red-100 text-red-800";case"equity":return"bg-green-100 text-green-800";case"income":return"bg-purple-100 text-purple-800";case"expense":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},E=t=>{switch(t){case"asset":return"Activo";case"liability":return"Pasivo";case"equity":return"Patrimonio";case"income":return"Ingreso";case"expense":return"Gasto";default:return"Otro"}},D=t=>["asset","expense"].includes(t)?"debit":"credit",K=t=>g.filter(a=>a.type===t&&a.level<4&&!a.allowPosting),Z=t=>{if(!t)return 1;const a=g.find(s=>s.id===t);return a?a.level+1:1},ee=t=>{X(a=>a.includes(t)?a.filter(s=>s!==t):[...a,t])},te=t=>v.filter(a=>a.parentId===t),se=t=>{O(t),S(!1),A(!0)},I=t=>{const a=t.split(`
`),s=[];for(let o=1;o<a.length;o++){const n=a[o].trim();if(!n)continue;const r=n.split(",").map(c=>c.trim().replace(/"/g,""));r.length>=3&&s.push({code:r[0],name:r[1],type:r[2].toLowerCase(),parentCode:r[3]||void 0,description:r[4]||void 0,balance:r[5]?parseFloat(r[5]):0})}return s},ae=t=>{const a=t.split(`
`),s=[];for(const o of a)if(o.startsWith("ACCNT")){const n=o.split("	");if(n.length>=4){const r=n[2]?.toLowerCase(),c=le(r);s.push({code:n[1]||"",name:n[1]||"",type:c,description:n[3]||"",balance:n[4]?parseFloat(n[4]):0})}}return s},re=async t=>{const a=await t.text();return I(a)},oe=t=>{const o=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("account"),n=[];for(let r=0;r<o.length;r++){const c=o[r],y=c.getAttribute("code")||"",ge=c.getAttribute("name")||c.textContent||"",be=c.getAttribute("type")?.toLowerCase()||"asset",he=c.getAttribute("parent")||void 0,ye=c.getAttribute("description")||void 0;n.push({code:y,name:ge,type:be,parentCode:he,description:ye})}return n},ne=t=>{try{const a=JSON.parse(t);if(Array.isArray(a))return a.map(s=>({code:s.code||s.accountCode||"",name:s.name||s.accountName||"",type:(s.type||s.accountType||"asset").toLowerCase(),parentCode:s.parentCode||s.parent||void 0,description:s.description||void 0,balance:s.balance||0}))}catch(a){console.error("Error parsing JSON:",a)}return[]},le=t=>({bank:"asset","accounts receivable":"asset","other current asset":"asset","fixed asset":"asset","accounts payable":"liability","credit card":"liability","other current liability":"liability","long term liability":"liability",equity:"equity",income:"income",expense:"expense","cost of goods sold":"expense"})[t]||"asset",ie=async t=>{const a=t.target.files?.[0];if(!(!a||!u||!p)){T(!0),b(0);try{let s=[];const o=a.name.toLowerCase().split(".").pop();switch(b(25),u.id){case"csv":case"sage":case"xero":const n=await a.text();s=I(n);break;case"quickbooks":if(o==="iif"){const y=await a.text();s=ae(y)}else{const y=await a.text();s=I(y)}break;case"excel":s=await re(a);break;case"xml":case"sap":const r=await a.text();s=oe(r);break;case"json":const c=await a.text();s=ne(c);break;default:throw new Error("Formato no soportado")}b(75),await ce(s),b(100),setTimeout(()=>{T(!1),b(0),A(!1),alert(`Se importaron ${s.length} cuentas exitosamente desde ${u.name}.`)},500)}catch(s){T(!1),b(0),alert(`Error al procesar el archivo ${u.name}. Verifique el formato.`),console.error("Import error:",s)}}},ce=async t=>{if(!p)return;const a={};for(const s of t)if(!(!s.code||!s.name))try{const o={code:s.code,name:s.name,type:s.type||"asset",level:1,balance:s.balance||0,is_active:!0,description:s.description,normal_balance:D(s.type||"asset"),allow_posting:!0,parent_id:null},n=await f.create(p.id,o);a[s.code]=n.id}catch(o){console.error("Error importing account:",s.code,o)}await h()},de=t=>{let a="",s="";switch(t){case"csv":a=`Código,Nombre,Tipo,Código Padre,Descripción,Saldo
1000,ACTIVOS,asset,,Activos totales de la empresa,0
1100,ACTIVOS CORRIENTES,asset,1000,Activos de corto plazo,0
1110,Efectivo y Equivalentes,asset,1100,Dinero en efectivo y equivalentes,0
1111,Caja General,asset,1110,Dinero en caja,25000
2000,PASIVOS,liability,,Pasivos totales de la empresa,0
2100,PASIVOS CORRIENTES,liability,2000,Pasivos de corto plazo,0
3000,PATRIMONIO,equity,,Patrimonio de la empresa,0
4000,INGRESOS,income,,Ingresos totales,0
5000,GASTOS,expense,,Gastos totales,0`,s="plantilla_catalogo_cuentas.csv";break;case"quickbooks":a=`!ACCNT	NAME	ACCNTTYPE	DESC	ACCNUM
ACCNT	Caja General	Bank	Cuenta de caja principal	1111
ACCNT	Banco Popular	Bank	Cuenta bancaria principal	1112
ACCNT	Cuentas por Cobrar	Accounts Receivable	Cuentas por cobrar clientes	1120
ACCNT	Inventarios	Other Current Asset	Inventario de productos	1130
ACCNT	Cuentas por Pagar	Accounts Payable	Cuentas por pagar proveedores	2110
ACCNT	Capital Social	Equity	Capital social de la empresa	3100
ACCNT	Ventas	Income	Ingresos por ventas	4100
ACCNT	Gastos Operativos	Expense	Gastos operativos generales	5100`,s="plantilla_quickbooks.iif";break;case"xml":a=`<?xml version="1.0" encoding="UTF-8"?>
<chart_of_accounts>
  <account code="1000" name="ACTIVOS" type="asset" description="Activos totales"/>
  <account code="1100" name="ACTIVOS CORRIENTES" type="asset" parent="1000" description="Activos corrientes"/>
  <account code="1111" name="Caja General" type="asset" parent="1100" description="Caja principal"/>
  <account code="2000" name="PASIVOS" type="liability" description="Pasivos totales"/>
  <account code="2110" name="Cuentas por Pagar" type="liability" parent="2000" description="Cuentas por pagar"/>
  <account code="3000" name="PATRIMONIO" type="equity" description="Patrimonio total"/>
  <account code="4000" name="INGRESOS" type="income" description="Ingresos totales"/>
  <account code="5000" name="GASTOS" type="expense" description="Gastos totales"/>
</chart_of_accounts>`,s="plantilla_catalogo.xml";break;case"json":a=JSON.stringify([{code:"1000",name:"ACTIVOS",type:"asset",description:"Activos totales"},{code:"1100",name:"ACTIVOS CORRIENTES",type:"asset",parentCode:"1000",description:"Activos corrientes"},{code:"1111",name:"Caja General",type:"asset",parentCode:"1100",description:"Caja principal",balance:25e3},{code:"2000",name:"PASIVOS",type:"liability",description:"Pasivos totales"},{code:"2110",name:"Cuentas por Pagar",type:"liability",parentCode:"2000",description:"Cuentas por pagar"},{code:"3000",name:"PATRIMONIO",type:"equity",description:"Patrimonio total"},{code:"4000",name:"INGRESOS",type:"income",description:"Ingresos totales"},{code:"5000",name:"GASTOS",type:"expense",description:"Gastos totales"}],null,2),s="plantilla_catalogo.json";break;default:return}const o=new Blob([a],{type:"text/plain"}),n=window.URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=s,r.click(),window.URL.revokeObjectURL(n)},ue=async()=>{if(!p||!l.code||!l.name){alert("Por favor complete todos los campos requeridos.");return}try{const t={code:l.code,name:l.name,type:l.type,parent_id:l.parentId||null,level:Z(l.parentId),balance:0,is_active:!0,description:l.description,normal_balance:D(l.type),allow_posting:l.allowPosting};await f.create(p.id,t),await h(),x({code:"",name:"",type:"asset",parentId:"",description:"",allowPosting:!0}),C(!1),alert("Cuenta creada exitosamente.")}catch(t){console.error("Error creating account:",t),alert("Error al crear la cuenta. Verifique que el código no esté duplicado.")}},pe=async()=>{if(!i||!i.code||!i.name){alert("Por favor complete todos los campos requeridos.");return}try{const t={code:i.code,name:i.name,description:i.description,allow_posting:i.allowPosting,is_active:i.isActive};await f.update(i.id,t),await h(),m(null),w(!1),alert("Cuenta actualizada exitosamente.")}catch(t){console.error("Error updating account:",t),alert("Error al actualizar la cuenta.")}},me=async t=>{if(confirm("¿Está seguro de que desea eliminar esta cuenta? Esta acción no se puede deshacer."))try{const a=g.find(o=>o.id===t);if(a&&a.balance!==0){alert("No se puede eliminar una cuenta con saldo. Primero debe transferir el saldo a otra cuenta.");return}if(g.some(o=>o.parentId===t)){alert("No se puede eliminar una cuenta que tiene subcuentas. Primero elimine o reasigne las subcuentas.");return}await f.delete(t),await h(),alert("Cuenta eliminada exitosamente.")}catch(a){console.error("Error deleting account:",a),alert("Error al eliminar la cuenta. Verifique que no tenga movimientos contables asociados.")}},xe=()=>{try{let t=`Catálogo de Cuentas
`;t+=`Generado: ${new Date().toLocaleDateString()}

`,t+=`Código,Nombre,Tipo,Nivel,Saldo,Estado,Descripción
`,v.forEach(r=>{const c=[r.code,`"${r.name}"`,E(r.type),r.level,Math.abs(r.balance).toLocaleString(),r.isActive?"Activa":"Inactiva",`"${r.description||""}"`].join(",");t+=c+`
`}),t+=`
Resumen por Tipo:
`;const a=v.reduce((r,c)=>(r[c.type]=(r[c.type]||0)+1,r),{});Object.entries(a).forEach(([r,c])=>{t+=`${E(r)},${c}
`});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),n=URL.createObjectURL(s);o.setAttribute("href",n),o.setAttribute("download",`catalogo_cuentas_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(t){console.error("Error downloading Excel:",t),alert("Error al descargar el archivo")}},q=t=>{const a=g.some(n=>n.parentId===t.id),s=J.includes(t.id),o=te(t.id);return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center py-3 px-4 border-b border-gray-100 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center flex-1",style:{paddingLeft:`${(t.level-1)*20}px`},children:[a&&e.jsx("button",{onClick:()=>ee(t.id),className:"mr-2 text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:`ri-arrow-${s?"down":"right"}-s-line`})}),e.jsxs("div",{className:"flex-1 grid grid-cols-7 gap-4 items-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.code}),e.jsx("div",{className:"text-gray-900",children:t.name}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${H(t.type)}`,children:E(t.type)})}),e.jsx("div",{className:"text-sm text-gray-600",children:t.level}),e.jsxs("div",{className:"text-sm text-gray-900",children:["RD$",Math.abs(t.balance).toLocaleString(),t.balance<0&&" (Cr)"]}),e.jsx("div",{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"Activa":"Inactiva"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{m(t),w(!0)},className:"text-blue-600 hover:text-blue-900",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>me(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]})}),a&&s&&o.map(n=>q(n))]},t.id)},F=v.filter(t=>t.level===1);return G?e.jsx(L,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando catálogo de cuentas..."})]})})}):e.jsx(L,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catálogo de Cuentas"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestión completa del plan de cuentas contables"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:xe,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Descargar Excel"]}),e.jsxs("button",{onClick:()=>S(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-upload-line mr-2"}),"Importar Catálogo"]}),e.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Cuenta"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:j,onChange:t=>_(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar cuentas por código o nombre..."})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsx("select",{value:N,onChange:t=>V(t.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:Y.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-7 gap-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("div",{children:"Código"}),e.jsx("div",{children:"Nombre de la Cuenta"}),e.jsx("div",{children:"Tipo"}),e.jsx("div",{children:"Nivel"}),e.jsx("div",{children:"Saldo"}),e.jsx("div",{children:"Estado"}),e.jsx("div",{children:"Acciones"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:F.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("i",{className:"ri-file-list-line text-4xl mb-4 block"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay cuentas registradas"}),e.jsx("p",{className:"text-sm",children:"Comience agregando su primera cuenta contable o importe un catálogo existente."})]}):F.map(t=>q(t))})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Seleccionar Formato de Importación"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Elija el formato del sistema contable desde el cual desea importar el catálogo de cuentas:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:W.map(t=>e.jsxs("div",{onClick:()=>se(t),className:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 hover:shadow-md transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.color} flex items-center justify-center mr-3`,children:e.jsx("i",{className:`${t.icon} text-lg`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.fileTypes.join(", ")})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]},t.id))}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 whitespace-nowrap",children:"Cancelar"})})]})}),U&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Importar desde ",u.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`border rounded-lg p-4 ${u.color.replace("text-","border-").replace("100","200")}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:`${u.icon} text-lg mr-2`}),e.jsx("h4",{className:"font-medium",children:u.name})]}),e.jsx("p",{className:"text-sm mb-2",children:u.description}),e.jsxs("p",{className:"text-xs",children:["Formatos soportados: ",u.fileTypes.join(", ")]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>de(u.id),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap mb-4",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Descargar Plantilla ",u.name]})}),k&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Procesando archivo..."}),e.jsxs("span",{children:[R,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Seleccionar archivo ",u.name]}),e.jsx("input",{ref:Q,type:"file",accept:u.fileTypes.join(","),onChange:ie,disabled:k,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:e.jsx("button",{onClick:()=>{A(!1),O(null)},disabled:k,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 whitespace-nowrap disabled:opacity-50",children:"Cancelar"})})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Agregar Nueva Cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código"}),e.jsx("input",{type:"text",value:l.code,onChange:t=>x({...l,code:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 1114"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>x({...l,name:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre de la cuenta"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:l.type,onChange:t=>x({...l,type:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"asset",children:"Activo"}),e.jsx("option",{value:"liability",children:"Pasivo"}),e.jsx("option",{value:"equity",children:"Patrimonio"}),e.jsx("option",{value:"income",children:"Ingreso"}),e.jsx("option",{value:"expense",children:"Gasto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuenta Padre"}),e.jsxs("select",{value:l.parentId,onChange:t=>x({...l,parentId:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Cuenta Principal"}),K(l.type).map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),e.jsx("textarea",{value:l.description,onChange:t=>x({...l,description:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Descripción opcional"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"allowPosting",checked:l.allowPosting,onChange:t=>x({...l,allowPosting:t.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"allowPosting",className:"text-sm text-gray-700",children:"Permitir movimientos contables"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap",children:"Agregar Cuenta"})]})]})}),B&&i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Editar Cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código"}),e.jsx("input",{type:"text",value:i.code,onChange:t=>m({...i,code:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:i.name,onChange:t=>m({...i,name:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),e.jsx("textarea",{value:i.description||"",onChange:t=>m({...i,description:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editAllowPosting",checked:i.allowPosting,onChange:t=>m({...i,allowPosting:t.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"editAllowPosting",className:"text-sm text-gray-700",children:"Permitir movimientos contables"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editIsActive",checked:i.isActive,onChange:t=>m({...i,isActive:t.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"editIsActive",className:"text-sm text-gray-700",children:"Cuenta activa"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{onClick:pe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap",children:"Guardar Cambios"})]})]})})]})})}export{je as default};
//# sourceMappingURL=page-BVnfpfzR.js.map
