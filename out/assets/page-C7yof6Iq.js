import{r as i,j as e,D as C}from"./index-CQa-GowG.js";const F=()=>{const[n,c]=i.useState("funds"),[o,m]=i.useState([]),[l,u]=i.useState([]),[h,d]=i.useState(!1),[g,x]=i.useState(!1),[S,k]=i.useState(null);i.useEffect(()=>{m([]),u([])},[]);const j=s=>{s.preventDefault();const t=new FormData(s.target),r={id:Date.now().toString(),name:t.get("name"),location:t.get("location"),custodian:t.get("custodian"),initialAmount:parseFloat(t.get("initialAmount")),currentBalance:parseFloat(t.get("initialAmount")),status:"active",createdAt:new Date().toISOString().split("T")[0]};m([...o,r]),d(!1)},y=s=>{s.preventDefault();const t=new FormData(s.target),r={id:Date.now().toString(),fundId:t.get("fundId"),date:t.get("date"),description:t.get("description"),category:t.get("category"),amount:parseFloat(t.get("amount")),receipt:t.get("receipt"),approvedBy:"",status:"pending"};u([...l,r]),x(!1)},p=()=>o.reduce((s,t)=>s+t.currentBalance,0),b=()=>l.reduce((s,t)=>s+t.amount,0),f=()=>l.filter(s=>s.status==="pending").length,N=()=>{try{let s=`Caja Chica
`;s+=`Generado: ${new Date().toLocaleDateString()}

`,s+=`Fecha,Descripción,Categoría,Monto,Estado,Aprobado Por
`,l.forEach(a=>{const w=[a.date,`"${a.description}"`,a.category,a.amount.toLocaleString(),a.status==="approved"?"Aprobado":a.status==="pending"?"Pendiente":"Rechazado",a.approvedBy||"N/A"].join(",");s+=w+`
`}),s+=`
Resumen:
`,s+=`Total Gastos:,${l.length}
`,s+=`Gastos Aprobados:,${l.filter(a=>a.status==="approved").length}
`,s+=`Gastos Pendientes:,${l.filter(a=>a.status==="pending").length}
`,s+=`Total Monto:,RD$${b().toLocaleString()}
`,s+=`Saldo Total Fondos:,RD$${p().toLocaleString()}
`;const t=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),v=URL.createObjectURL(t);r.setAttribute("href",v),r.setAttribute("download",`caja_chica_${new Date().toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(s){console.error("Error downloading Excel:",s),alert("Error al descargar el archivo")}};return e.jsx(C,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Caja Chica"}),e.jsx("p",{className:"text-gray-600",children:"Gestión de fondos de gastos menores"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:N,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Descargar Excel"]}),e.jsxs("button",{onClick:()=>window.location.href="/dashboard",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-home-line mr-2"}),"Volver al Inicio"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-wallet-3-line text-xl text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total en Fondos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",p().toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-xl text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fondos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.filter(s=>s.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"ri-file-list-3-line text-xl text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gastos Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f()})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("i",{className:"ri-shopping-cart-line text-xl text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Gastos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",b().toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>c("funds"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${n==="funds"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-wallet-3-line mr-2"}),"Fondos de Caja Chica"]}),e.jsxs("button",{onClick:()=>c("expenses"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${n==="expenses"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-shopping-cart-line mr-2"}),"Gastos y Comprobantes"]}),e.jsxs("button",{onClick:()=>c("reimbursements"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${n==="reimbursements"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-refund-2-line mr-2"}),"Reembolsos"]})]})}),e.jsxs("div",{className:"p-6",children:[n==="funds"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fondos de Caja Chica"}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Crear Fondo"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"Activo":"Inactivo"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),s.location]}),e.jsxs("p",{children:[e.jsx("i",{className:"ri-user-line mr-2"}),"Custodio: ",s.custodian]}),e.jsxs("p",{children:[e.jsx("i",{className:"ri-calendar-line mr-2"}),"Creado: ",s.createdAt]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Monto Inicial:"}),e.jsxs("span",{className:"font-medium",children:["$",s.initialAmount.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Balance Actual:"}),e.jsxs("span",{className:"font-bold text-lg text-blue-600",children:["$",s.currentBalance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-4 flex space-x-2",children:[e.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded text-sm hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Ver Detalles"}),e.jsx("button",{className:"flex-1 bg-gray-600 text-white py-2 px-3 rounded text-sm hover:bg-gray-700 transition-colors whitespace-nowrap",children:"Editar"})]})]},s.id))})]}),n==="expenses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gastos y Comprobantes"}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Registrar Gasto"]})]}),e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.date}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.category}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",s.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="approved"?"Aprobado":s.status==="pending"?"Pendiente":"Rechazado"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"Ver"}),e.jsx("button",{className:"text-green-600 hover:text-green-900 mr-3",children:"Aprobar"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:"Rechazar"})]})]},s.id))})]})})]}),n==="reimbursements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Solicitudes de Reembolso"}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Solicitud"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-information-line text-yellow-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Proceso de Reembolso"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Los reembolsos se procesan cuando el saldo de caja chica está bajo. Se requiere aprobación del supervisor y comprobantes válidos."})]})]})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-refund-2-line text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay solicitudes de reembolso"}),e.jsx("p",{className:"text-gray-500",children:"Las solicitudes de reembolso aparecerán aquí cuando se creen."})]})]})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Crear Nuevo Fondo"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Fondo"}),e.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Caja Chica Oficina Principal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicación"}),e.jsx("input",{type:"text",name:"location",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Santo Domingo - Oficina Central"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custodio Responsable"}),e.jsx("input",{type:"text",name:"custodian",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del responsable"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto Inicial (RD$)"}),e.jsx("input",{type:"number",name:"initialAmount",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Crear Fondo"})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Registrar Gasto"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fondo de Caja Chica"}),e.jsxs("select",{name:"fundId",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar fondo"}),o.filter(s=>s.status==="active").map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),e.jsx("input",{type:"date",name:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),e.jsx("input",{type:"text",name:"description",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripción del gasto"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),e.jsxs("select",{name:"category",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar categoría"}),e.jsx("option",{value:"Suministros de Oficina",children:"Suministros de Oficina"}),e.jsx("option",{value:"Viáticos",children:"Viáticos"}),e.jsx("option",{value:"Transporte",children:"Transporte"}),e.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"}),e.jsx("option",{value:"Comunicaciones",children:"Comunicaciones"}),e.jsx("option",{value:"Otros",children:"Otros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto (RD$)"}),e.jsx("input",{type:"number",name:"amount",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Recibo"}),e.jsx("input",{type:"text",name:"receipt",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: REC-001"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Registrar"})]})]})]})})]})})};export{F as default};
//# sourceMappingURL=page-C7yof6Iq.js.map
