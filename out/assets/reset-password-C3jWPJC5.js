import{a as E,u as R,r as a,j as e,L as x}from"./index-CQa-GowG.js";function z(){const b=E(),{resetPassword:g,updatePassword:j}=R(),[o,v]=a.useState(""),[c,w]=a.useState(""),[d,N]=a.useState(""),[l,s]=a.useState(!1),[f,r]=a.useState(""),[h,p]=a.useState(!1),[i,y]=a.useState(!1),[m,P]=a.useState(!1),[u,S]=a.useState(!1);a.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).get("type")==="recovery"&&y(!0)},[]);const C=async t=>{if(t.preventDefault(),r(""),s(!0),!o){r("Por favor ingresa tu correo electrónico"),s(!1);return}if(!/\S+@\S+\.\S+/.test(o)){r("Por favor ingresa un email válido"),s(!1);return}try{const{error:n}=await g(o);if(n){r(n),s(!1);return}p(!0),s(!1)}catch{r("Error al enviar el correo. Por favor intenta de nuevo."),s(!1)}},k=async t=>{if(t.preventDefault(),r(""),s(!0),!c||!d){r("Por favor completa todos los campos"),s(!1);return}if(c.length<6){r("La contraseña debe tener al menos 6 caracteres"),s(!1);return}if(c!==d){r("Las contraseñas no coinciden"),s(!1);return}try{const{error:n}=await j(c);if(n){r(n),s(!1);return}p(!0),setTimeout(()=>{b("/auth/login")},2e3)}catch{r("Error al actualizar la contraseña. Por favor intenta de nuevo."),s(!1)}};return h&&!i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:e.jsx("i",{className:"ri-mail-send-line text-4xl text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"¡Correo Enviado!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Hemos enviado un enlace de recuperación a ",e.jsx("strong",{children:o})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"ri-information-line mr-2"}),"Por favor revisa tu bandeja de entrada y haz clic en el enlace para restablecer tu contraseña."]})}),e.jsxs(x,{to:"/auth/login",className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Volver al Inicio de Sesión"]})]})})}):h&&i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:e.jsx("i",{className:"ri-check-line text-4xl text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"¡Contraseña Actualizada!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tu contraseña ha sido actualizada exitosamente."}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Serás redirigido al inicio de sesión en unos segundos..."}),e.jsxs(x,{to:"/auth/login",className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 transition-all whitespace-nowrap",children:[e.jsx("i",{className:"ri-login-box-line mr-2"}),"Ir a Iniciar Sesión"]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl mb-4",children:e.jsx("i",{className:`${i?"ri-lock-password-line":"ri-lock-unlock-line"} text-3xl text-white`})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:i?"Nueva Contraseña":"Recuperar Contraseña"}),e.jsx("p",{className:"text-gray-600",children:i?"Ingresa tu nueva contraseña":"Te enviaremos un enlace para restablecer tu contraseña"})]}),f&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[e.jsx("i",{className:"ri-error-warning-line text-red-600 text-xl mr-3 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:f})]}),i?e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400"})}),e.jsx("input",{id:"newPassword",type:m?"text":"password",value:c,onChange:t=>w(t.target.value),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Mínimo 6 caracteres",disabled:l}),e.jsx("button",{type:"button",onClick:()=>P(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:l,children:e.jsx("i",{className:`${m?"ri-eye-off-line":"ri-eye-line"} text-gray-400 hover:text-gray-600`})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-gray-400"})}),e.jsx("input",{id:"confirmPassword",type:u?"text":"password",value:d,onChange:t=>N(t.target.value),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Repite tu contraseña",disabled:l}),e.jsx("button",{type:"button",onClick:()=>S(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:l,children:e.jsx("i",{className:`${u?"ri-eye-off-line":"ri-eye-line"} text-gray-400 hover:text-gray-600`})})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center whitespace-nowrap",children:l?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Actualizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Actualizar Contraseña"]})})]}):e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-gray-400"})}),e.jsx("input",{id:"email",type:"email",value:o,onChange:t=>v(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"tu@email.com",disabled:l})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center whitespace-nowrap",children:l?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-mail-send-line mr-2"}),"Enviar Enlace de Recuperación"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(x,{to:"/auth/login",className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors inline-flex items-center whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Volver al Inicio de Sesión"]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 Sistema Contable. Todos los derechos reservados."})})]})})}export{z as default};
//# sourceMappingURL=reset-password-C3jWPJC5.js.map
