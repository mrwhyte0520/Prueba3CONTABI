import{a as I,r as o,j as e,D as O}from"./index-CQa-GowG.js";function P(){const w=I(),[R,i]=o.useState(!1),[t,g]=o.useState(null),[c,b]=o.useState(""),[d,v]=o.useState(""),[u,f]=o.useState(""),[A]=o.useState([{id:"1",assetCode:"ACT-001",assetName:"Edificio Principal",category:"Edificios y Construcciones",originalValue:42e5,previousValue:378e4,newValue:45e5,revaluationAmount:72e4,revaluationDate:"2024-01-15",reason:"Incremento del Mercado",method:"Avalúo Profesional",appraiser:"Avalúos Profesionales SA",status:"Aprobado",approvedBy:"Juan Pérez",notes:"Revalorización por incremento en el valor del mercado inmobiliario"},{id:"2",assetCode:"ACT-045",assetName:"Maquinaria Industrial A",category:"Maquinaria y Equipo",originalValue:28e4,previousValue:14e4,newValue:18e4,revaluationAmount:4e4,revaluationDate:"2023-12-10",reason:"Mejoras y Actualizaciones",method:"Costo de Reposición",appraiser:"Técnicos Especializados",status:"Aprobado",approvedBy:"María González",notes:"Revalorización por mejoras técnicas implementadas"},{id:"3",assetCode:"ACT-089",assetName:"Servidor Dell PowerEdge",category:"Equipo de Computación",originalValue:45e3,previousValue:33750,newValue:28e3,revaluationAmount:-5750,revaluationDate:"2023-11-20",reason:"Obsolescencia Tecnológica",method:"Valor de Mercado",appraiser:"Evaluaciones IT",status:"Pendiente",approvedBy:"",notes:"Ajuste por obsolescencia tecnológica acelerada"},{id:"4",assetCode:"ACT-156",assetName:"Mobiliario de Oficina",category:"Mobiliario y Equipo de Oficina",originalValue:25e3,previousValue:23750,newValue:27e3,revaluationAmount:3250,revaluationDate:"2024-01-05",reason:"Incremento del Mercado",method:"Avalúo Profesional",appraiser:"Muebles y Avalúos",status:"En Revisión",approvedBy:"",notes:"Incremento por demanda en mobiliario de oficina"}]),j=["Incremento del Mercado","Mejoras y Actualizaciones","Obsolescencia Tecnológica","Deterioro Físico","Cambios Regulatorios","Ajuste por Inflación"],E=["Avalúo Profesional","Valor de Mercado","Costo de Reposición","Valor Presente Neto","Comparación de Ventas"],r=A.filter(a=>{const n=a.assetName.toLowerCase().includes(c.toLowerCase())||a.assetCode.toLowerCase().includes(c.toLowerCase()),p=!d||a.status===d,h=!u||a.reason===u;return n&&p&&h}),m=r.reduce((a,n)=>a+n.revaluationAmount,0),y=r.filter(a=>a.revaluationAmount>0),N=r.filter(a=>a.revaluationAmount<0),C=()=>{g(null),i(!0)},z=a=>{g(a),i(!0)},V=a=>{confirm("¿Está seguro de que desea eliminar esta revalorización?")&&alert("Revalorización eliminada correctamente")},D=a=>{confirm("¿Está seguro de que desea aprobar esta revalorización?")&&alert("Revalorización aprobada correctamente")},k=a=>{confirm("¿Está seguro de que desea rechazar esta revalorización?")&&alert("Revalorización rechazada")},S=a=>{a.preventDefault(),alert(t?"Revalorización actualizada correctamente":"Revalorización registrada correctamente"),i(!1)},T=()=>{const a=r,n=["Código Activo","Nombre del Activo","Categoría","Valor Original","Valor Anterior","Nuevo Valor","Monto Revalorización","Fecha Revalorización","Motivo","Método Evaluación","Evaluador/Tasador","Estado","Aprobado Por","Notas"],p=[["REVALORIZACIÓN DE ACTIVOS FIJOS"],[`Reporte generado: ${new Date().toLocaleDateString("es-DO")} ${new Date().toLocaleTimeString("es-DO")}`],[""],["RESUMEN DE REVALORIZACIONES"],["Revalorización Total",m.toFixed(2)],["Incrementos",y.length],["Decrementos",N.length],["Total de Revalorizaciones",a.length],[""],["FILTROS APLICADOS"],["Búsqueda",c||"Ninguno"],["Estado",d||"Todos"],["Motivo",u||"Todos"],[""],["DETALLE DE REVALORIZACIONES"],n,...a.map(s=>[s.assetCode,s.assetName,s.category,s.originalValue.toFixed(2),s.previousValue.toFixed(2),s.newValue.toFixed(2),s.revaluationAmount.toFixed(2),new Date(s.revaluationDate).toLocaleDateString("es-DO"),s.reason,s.method,s.appraiser,s.status,s.approvedBy,s.notes])].map(s=>s.join(",")).join(`
`),h=new Blob(["\uFEFF"+p],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),M=URL.createObjectURL(h);l.setAttribute("href",M),l.setAttribute("download",`revalorizaciones_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},x=a=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(a);return e.jsx(O,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w("/fixed-assets"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-2",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Volver a Activos Fijos"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Revalorización de Activos"}),e.jsx("p",{className:"text-gray-600",children:"Gestión de revalorizaciones y ajustes de valor"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Exportar Excel"]}),e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Revalorización"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revalorización Total"}),e.jsx("p",{className:`text-2xl font-bold ${m>=0?"text-green-600":"text-red-600"}`,children:x(m)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100",children:e.jsx("i",{className:"ri-trending-up-line text-xl text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Incrementos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-green-100",children:e.jsx("i",{className:"ri-arrow-up-line text-xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Decrementos"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:N.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-red-100",children:e.jsx("i",{className:"ri-arrow-down-line text-xl text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revalorizaciones"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-purple-100",children:e.jsx("i",{className:"ri-refresh-line text-xl text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por activo o código...",value:c,onChange:a=>b(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:d,onChange:a=>v(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En Revisión",children:"En Revisión"}),e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo"}),e.jsxs("select",{value:u,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los motivos"}),j.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{b(""),v(""),f("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors whitespace-nowrap",children:"Limpiar Filtros"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Revalorizaciones Registradas (",r.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Anterior"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nuevo Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revalorización"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motivo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.assetName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.assetCode," - ",a.category]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(a.previousValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(a.newValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("span",{className:a.revaluationAmount>=0?"text-green-600":"text-red-600",children:[a.revaluationAmount>=0?"+":"",x(a.revaluationAmount)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.reason}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.revaluationDate).toLocaleDateString("es-DO")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.status==="Aprobado"?"bg-green-100 text-green-800":a.status==="Pendiente"?"bg-yellow-100 text-yellow-800":a.status==="En Revisión"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:a.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z(a),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx("i",{className:"ri-edit-line"})}),a.status==="Pendiente"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(a.id),className:"text-green-600 hover:text-green-900",title:"Aprobar",children:e.jsx("i",{className:"ri-check-line"})}),e.jsx("button",{onClick:()=>k(a.id),className:"text-red-600 hover:text-red-900",title:"Rechazar",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsx("button",{onClick:()=>V(a.id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},a.id))})]})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?"Editar Revalorización":"Nueva Revalorización"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código del Activo *"}),e.jsx("input",{type:"text",required:!0,defaultValue:t?.assetCode||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ACT-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Anterior *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",defaultValue:t?.previousValue||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nuevo Valor *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",defaultValue:t?.newValue||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Revalorización *"}),e.jsx("input",{type:"date",required:!0,defaultValue:t?.revaluationDate||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de Revalorización *"}),e.jsxs("select",{required:!0,defaultValue:t?.reason||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar motivo"}),j.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Evaluación *"}),e.jsxs("select",{required:!0,defaultValue:t?.method||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar método"}),E.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evaluador/Tasador"}),e.jsx("input",{type:"text",defaultValue:t?.appraiser||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del evaluador"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{defaultValue:t?.status||"Pendiente",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En Revisión",children:"En Revisión"}),e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas y Observaciones"}),e.jsx("textarea",{rows:4,defaultValue:t?.notes||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Detalles adicionales sobre la revalorización"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[t?"Actualizar":"Registrar"," Revalorización"]})]})]})]})})]})})}export{P as default};
//# sourceMappingURL=page-CkxyTvnU.js.map
