{"version":3,"file":"page-BB7qHm6G.js","sources":["../../src/pages/products/page.tsx"],"sourcesContent":["\nimport { useState, useRef, useEffect } from 'react';\nimport DashboardLayout from '../../components/layout/DashboardLayout';\nimport { inventoryService } from '../../services/database';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface Product {\n  id: string;\n  name: string;\n  sku: string;\n  category: string;\n  price: number;\n  cost: number;\n  stock: number;\n  minStock: number;\n  maxStock: number;\n  barcode: string;\n  description: string;\n  supplier: string;\n  imageUrl: string;\n  status: 'active' | 'inactive';\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface Category {\n  id: string;\n  name: string;\n}\n\nexport default function ProductsPage() {\n  const { user } = useAuth();\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [categories, setCategories] = useState<Category[]>([]);\n\n  const [showModal, setShowModal] = useState(false);\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null);\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [selectedStatus, setSelectedStatus] = useState('all');\n  const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\n  const [showBulkActions, setShowBulkActions] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [formData, setFormData] = useState({\n    name: '',\n    sku: '',\n    category: '',\n    price: '',\n    cost: '',\n    stock: '',\n    minStock: '',\n    maxStock: '',\n    barcode: '',\n    description: '',\n    supplier: '',\n    imageUrl: '',\n    status: 'active' as 'active' | 'inactive'\n  });\n\n  const [categoryFormData, setCategoryFormData] = useState({\n    name: ''\n  });\n\n  \n\n  // Load products from database or use sample data\n  useEffect(() => {\n    loadProducts();\n  }, [user]);\n\n  const loadProducts = async () => {\n    setLoading(true);\n    try {\n      if (user) {\n        const data = await inventoryService.getItems(user.id);\n        if (data && data.length > 0) {\n          const transformedProducts = data.map((item: any) => ({\n            id: item.id,\n            name: item.name,\n            sku: item.sku,\n            category: item.category || 'Electrónicos',\n            price: item.selling_price || 0,\n            cost: item.cost_price || 0,\n            stock: item.current_stock || 0,\n            minStock: item.min_stock || 0,\n            maxStock: item.max_stock || 0,\n            barcode: item.barcode || '',\n            description: item.description || '',\n            supplier: item.supplier || '',\n            imageUrl: item.image_url || '',\n            status: item.is_active ? 'active' : 'inactive',\n            createdAt: item.created_at,\n            updatedAt: item.updated_at\n          }));\n          setProducts(transformedProducts);\n        } else {\n          setProducts([]);\n        }\n      } else {\n        setProducts([]);\n      }\n    } catch (error) {\n      console.error('Error loading products:', error);\n      setProducts([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredProducts = products.filter(product => {\n    const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         product.sku.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         product.barcode.includes(searchTerm) ||\n                         product.supplier.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;\n    const matchesStatus = selectedStatus === 'all' || \n                         (selectedStatus === 'low_stock' && product.stock <= product.minStock) ||\n                         product.status === selectedStatus;\n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n\n  // Dashboard calculations\n  const totalProducts = products.length;\n  const activeProducts = products.filter(p => p.status === 'active').length;\n  const lowStockProducts = products.filter(p => p.stock <= p.minStock).length;\n  const totalValue = products.reduce((sum, p) => sum + (p.price * p.stock), 0);\n  const totalCost = products.reduce((sum, p) => sum + (p.cost * p.stock), 0);\n  const potentialProfit = totalValue - totalCost;\n\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setFormData(prev => ({ ...prev, imageUrl: e.target?.result as string }));\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      const newProduct: Product = {\n        id: editingProduct?.id || Date.now().toString(),\n        name: formData.name,\n        sku: formData.sku,\n        category: formData.category,\n        price: parseFloat(formData.price),\n        cost: parseFloat(formData.cost),\n        stock: parseInt(formData.stock),\n        minStock: parseInt(formData.minStock),\n        maxStock: parseInt(formData.maxStock),\n        barcode: formData.barcode,\n        description: formData.description,\n        supplier: formData.supplier,\n        imageUrl: formData.imageUrl,\n        status: formData.status,\n        createdAt: editingProduct?.createdAt || new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n\n      if (user) {\n        const itemData = {\n          name: formData.name,\n          sku: formData.sku,\n          category: formData.category,\n          selling_price: parseFloat(formData.price),\n          cost_price: parseFloat(formData.cost),\n          current_stock: parseInt(formData.stock),\n          min_stock: parseInt(formData.minStock),\n          max_stock: parseInt(formData.maxStock),\n          barcode: formData.barcode,\n          description: formData.description,\n          supplier: formData.supplier,\n          image_url: formData.imageUrl,\n          is_active: formData.status === 'active'\n        };\n\n        if (editingProduct) {\n          await inventoryService.updateItem(editingProduct.id, itemData);\n        } else {\n          await inventoryService.createItem(user.id, itemData);\n        }\n      }\n\n      if (editingProduct) {\n        setProducts(prev => prev.map(p => p.id === editingProduct.id ? newProduct : p));\n      } else {\n        setProducts(prev => [...prev, newProduct]);\n      }\n\n      resetForm();\n      setShowModal(false);\n    } catch (error) {\n      console.error('Error saving product:', error);\n      alert('Error al guardar el producto. Intente nuevamente.');\n    }\n  };\n\n  const handleEdit = (product: Product) => {\n    setEditingProduct(product);\n    setFormData({\n      name: product.name,\n      sku: product.sku,\n      category: product.category,\n      price: product.price.toString(),\n      cost: product.cost.toString(),\n      stock: product.stock.toString(),\n      minStock: product.minStock.toString(),\n      maxStock: product.maxStock.toString(),\n      barcode: product.barcode,\n      description: product.description,\n      supplier: product.supplier,\n      imageUrl: product.imageUrl,\n      status: product.status\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (confirm('¿Está seguro de que desea eliminar este producto?')) {\n      try {\n        if (user) {\n          await inventoryService.deleteItem(id);\n        }\n        setProducts(prev => prev.filter(p => p.id !== id));\n      } catch (error) {\n        console.error('Error deleting product:', error);\n        alert('Error al eliminar el producto. Intente nuevamente.');\n      }\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (confirm(`¿Está seguro de que desea eliminar ${selectedProducts.length} productos seleccionados?`)) {\n      try {\n        for (const id of selectedProducts) {\n          if (user) {\n            await inventoryService.deleteItem(id);\n          }\n        }\n        setProducts(prev => prev.filter(p => !selectedProducts.includes(p.id)));\n        setSelectedProducts([]);\n        setShowBulkActions(false);\n      } catch (error) {\n        console.error('Error deleting products:', error);\n        alert('Error al eliminar los productos. Intente nuevamente.');\n      }\n    }\n  };\n\n  const handleBulkStatusChange = (status: 'active' | 'inactive') => {\n    setProducts(prev => prev.map(p => \n      selectedProducts.includes(p.id) ? { ...p, status, updatedAt: new Date().toISOString() } : p\n    ));\n    setSelectedProducts([]);\n    setShowBulkActions(false);\n  };\n\n  const exportToCSV = () => {\n    const headers = ['Nombre', 'SKU', 'Categoría', 'Precio', 'Costo', 'Stock', 'Stock Mín', 'Stock Máx', 'Proveedor', 'Estado'];\n    const csvContent = [\n      headers.join(','),\n      ...filteredProducts.map(product => [\n        `\"${product.name}\"`,\n        product.sku,\n        product.category,\n        product.price,\n        product.cost,\n        product.stock,\n        product.minStock,\n        product.maxStock,\n        `\"${product.supplier}\"`,\n        product.status === 'active' ? 'Activo' : 'Inactivo'\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = `productos_${new Date().toISOString().split('T')[0]}.csv`;\n    link.click();\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      sku: '',\n      category: '',\n      price: '',\n      cost: '',\n      stock: '',\n      minStock: '',\n      maxStock: '',\n      barcode: '',\n      description: '',\n      supplier: '',\n      imageUrl: '',\n      status: 'active'\n    });\n    setEditingProduct(null);\n  };\n\n  const generateSKU = () => {\n    const timestamp = Date.now().toString().slice(-6);\n    const random = Math.random().toString(36).substring(2, 5).toUpperCase();\n    return `PRD-${timestamp}-${random}`;\n  };\n\n  const generateBarcode = () => {\n    return Math.floor(Math.random() * 9000000000000) + 1000000000000;\n  };\n\n  const toggleProductSelection = (productId: string) => {\n    setSelectedProducts(prev => \n      prev.includes(productId) \n        ? prev.filter(id => id !== productId)\n        : [...prev, productId]\n    );\n  };\n\n  const selectAllProducts = () => {\n    if (selectedProducts.length === filteredProducts.length) {\n      setSelectedProducts([]);\n    } else {\n      setSelectedProducts(filteredProducts.map(p => p.id));\n    }\n  };\n\n  useEffect(() => {\n    setShowBulkActions(selectedProducts.length > 0);\n  }, [selectedProducts]);\n\n  const handleCategorySubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!categoryFormData.name.trim()) {\n      alert('Por favor ingrese un nombre para la categoría');\n      return;\n    }\n\n    // Check if category already exists\n    const categoryExists = categories.some(cat => \n      cat.name.toLowerCase() === categoryFormData.name.trim().toLowerCase()\n    );\n\n    if (categoryExists) {\n      alert('Esta categoría ya existe');\n      return;\n    }\n\n    try {\n      const newCategory: Category = {\n        id: editingCategory?.id || Date.now().toString(),\n        name: categoryFormData.name.trim()\n      };\n\n      if (editingCategory) {\n        // Update existing category\n        setCategories(prev => prev.map(cat => \n          cat.id === editingCategory.id ? newCategory : cat\n        ));\n        \n        // Update products that use this category\n        setProducts(prev => prev.map(product => \n          product.category === editingCategory.name \n            ? { ...product, category: newCategory.name, updatedAt: new Date().toISOString() }\n            : product\n        ));\n      } else {\n        // Add new category\n        setCategories(prev => [...prev, newCategory]);\n      }\n\n      resetCategoryForm();\n      setShowCategoryModal(false);\n    } catch (error) {\n      console.error('Error saving category:', error);\n      alert('Error al guardar la categoría. Intente nuevamente.');\n    }\n  };\n\n  const handleEditCategory = (category: Category) => {\n    setEditingCategory(category);\n    setCategoryFormData({\n      name: category.name\n    });\n    setShowCategoryModal(true);\n  };\n\n  const handleDeleteCategory = (categoryId: string) => {\n    const category = categories.find(cat => cat.id === categoryId);\n    if (!category) return;\n\n    const productsInCategory = products.filter(p => p.category === category.name);\n    \n    if (productsInCategory.length > 0) {\n      alert(`No se puede eliminar la categoría \"${category.name}\" porque tiene ${productsInCategory.length} productos asociados. Primero mueva los productos a otra categoría.`);\n      return;\n    }\n\n    if (confirm(`¿Está seguro de que desea eliminar la categoría \"${category.name}\"?`)) {\n      setCategories(prev => prev.filter(cat => cat.id !== categoryId));\n    }\n  };\n\n  const resetCategoryForm = () => {\n    setCategoryFormData({\n      name: ''\n    });\n    setEditingCategory(null);\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"p-6 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Cargando módulo de productos...</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"p-6\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => window.REACT_APP_NAVIGATE('/dashboard')}\n              className=\"flex items-center text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              <i className=\"ri-arrow-left-line mr-2\"></i>\n              Volver al Inicio\n            </button>\n            <div className=\"h-6 w-px bg-gray-300\"></div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Gestión de Productos</h1>\n          </div>\n          <button\n            onClick={() => {\n              resetForm();\n              setShowModal(true);\n            }}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>\n            Agregar Producto\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"border-b border-gray-200 mb-6\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('dashboard')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\n                activeTab === 'dashboard'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-dashboard-line mr-2\"></i>\n              Dashboard\n            </button>\n            <button\n              onClick={() => setActiveTab('products')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\n                activeTab === 'products'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-shopping-bag-line mr-2\"></i>\n              Productos\n            </button>\n            <button\n              onClick={() => setActiveTab('categories')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\n                activeTab === 'categories'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-folder-line mr-2\"></i>\n              Categorías\n            </button>\n            <button\n              onClick={() => setActiveTab('reports')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${\n                activeTab === 'reports'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-file-chart-line mr-2\"></i>\n              Reportes\n            </button>\n          </nav>\n        </div>\n\n        {/* Dashboard Tab */}\n        {activeTab === 'dashboard' && (\n          <div className=\"space-y-6\">\n            {/* Statistics Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-blue-100\">\n                    <i className=\"ri-shopping-bag-line text-2xl text-blue-600\"></i>\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Total Productos</p>\n                    <p className=\"text-2xl font-semibold text-gray-900\">{totalProducts}</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-green-100\">\n                    <i className=\"ri-check-line text-2xl text-green-600\"></i>\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Productos Activos</p>\n                    <p className=\"text-2xl font-semibold text-gray-900\">{activeProducts}</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-red-100\">\n                    <i className=\"ri-alert-line text-2xl text-red-600\"></i>\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Stock Bajo</p>\n                    <p className=\"text-2xl font-semibold text-gray-900\">{lowStockProducts}</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <div className=\"flex items-center\">\n                  <div className=\"p-3 rounded-full bg-purple-100\">\n                    <i className=\"ri-money-dollar-circle-line text-2xl text-purple-600\"></i>\n                  </div>\n                  <div className=\"ml-4\">\n                    <p className=\"text-sm font-medium text-gray-600\">Valor Total</p>\n                    <p className=\"text-2xl font-semibold text-gray-900\">RD${totalValue.toLocaleString()}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Financial Summary */}\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Resumen Financiero</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-gray-600\">Valor Total Inventario</p>\n                  <p className=\"text-2xl font-bold text-blue-600\">RD${totalValue.toLocaleString()}</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-gray-600\">Costo Total</p>\n                  <p className=\"text-2xl font-bold text-orange-600\">RD${totalCost.toLocaleString()}</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-gray-600\">Ganancia Potencial</p>\n                  <p className=\"text-2xl font-bold text-green-600\">RD${potentialProfit.toLocaleString()}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Low Stock Alert */}\n            {lowStockProducts > 0 && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"flex items-center\">\n                  <i className=\"ri-alert-line text-red-600 text-xl mr-3\"></i>\n                  <div>\n                    <h4 className=\"text-red-800 font-medium\">Alerta de Stock Bajo</h4>\n                    <p className=\"text-red-700 text-sm\">\n                      {lowStockProducts} productos tienen stock por debajo del mínimo recomendado.\n                    </p>\n                  </div>\n                  <button\n                    onClick={() => {\n                      setActiveTab('products');\n                      setSelectedStatus('low_stock');\n                    }}\n                    className=\"ml-auto bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm whitespace-nowrap\"\n                  >\n                    Ver Productos\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Recent Products */}\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Productos Recientes</h3>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"space-y-4\">\n                  {products.slice(0, 5).map((product) => (\n                    <div key={product.id} className=\"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0\">\n                      <div className=\"flex items-center space-x-4\">\n                        <img\n                          src={product.imageUrl || 'https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=60&height=60&seq=placeholder002&orientation=squarish'}\n                          alt={product.name}\n                          className=\"w-12 h-12 object-cover object-top rounded-lg\"\n                        />\n                        <div>\n                          <h4 className=\"font-medium text-gray-900\">{product.name}</h4>\n                          <p className=\"text-sm text-gray-500\">{product.sku}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium text-gray-900\">RD${product.price.toLocaleString()}</p>\n                        <p className=\"text-sm text-gray-500\">Stock: {product.stock}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Products Tab */}\n        {activeTab === 'products' && (\n          <div className=\"space-y-6\">\n            {/* Filters and Actions */}\n            <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200\">\n              <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <i className=\"ri-search-line text-gray-400\"></i>\n                  </div>\n                  <input\n                    type=\"text\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\n                    placeholder=\"Buscar productos...\"\n                  />\n                </div>\n                \n                <select\n                  value={selectedCategory}\n                  onChange={(e) => setSelectedCategory(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8\"\n                >\n                  <option value=\"all\">Todas las Categorías</option>\n                  {categories.map((category) => (\n                    <option key={category.id} value={category.name}>{category.name}</option>\n                  ))}\n                </select>\n\n                <select\n                  value={selectedStatus}\n                  onChange={(e) => setSelectedStatus(e.target.value)}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8\"\n                >\n                  <option value=\"all\">Todos los Estados</option>\n                  <option value=\"active\">Activo</option>\n                  <option value=\"inactive\">Inactivo</option>\n                  <option value=\"low_stock\">Stock Bajo</option>\n                </select>\n\n                <button\n                  onClick={exportToCSV}\n                  className=\"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors text-sm whitespace-nowrap\"\n                >\n                  <i className=\"ri-download-line mr-2\"></i>\n                  Exportar Excel\n                </button>\n\n                <div className=\"text-sm text-gray-600 flex items-center\">\n                  <span className=\"font-medium\">{filteredProducts.length}</span>\n                  <span className=\"ml-1\">productos</span>\n                </div>\n              </div>\n\n              {/* Bulk Actions */}\n              {showBulkActions && (\n                <div className=\"flex items-center justify-between bg-blue-50 p-3 rounded-lg\">\n                  <span className=\"text-sm text-blue-800\">\n                    {selectedProducts.length} productos seleccionados\n                  </span>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => handleBulkStatusChange('active')}\n                      className=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors whitespace-nowrap\"\n                    >\n                      Activar\n                    </button>\n                    <button\n                      onClick={() => handleBulkStatusChange('inactive')}\n                      className=\"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors whitespace-nowrap\"\n                    >\n                      Desactivar\n                    </button>\n                    <button\n                      onClick={handleBulkDelete}\n                      className=\"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors whitespace-nowrap\"\n                    >\n                      Eliminar\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Select All */}\n              <div className=\"flex items-center mt-4\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedProducts.length === filteredProducts.length && filteredProducts.length > 0}\n                  onChange={selectAllProducts}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label className=\"ml-2 text-sm text-gray-600\">\n                  Seleccionar todos los productos visibles\n                </label>\n              </div>\n            </div>\n\n            {/* Products Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {filteredProducts.length === 0 ? (\n                <div className=\"col-span-full text-center py-12\">\n                  <i className=\"ri-shopping-bag-line text-6xl text-gray-300 mb-4 block\"></i>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No hay productos registrados</h3>\n                  <p className=\"text-gray-500 mb-4\">Comience agregando su primer producto al inventario.</p>\n                  <button\n                    onClick={() => {\n                      resetForm();\n                      setShowModal(true);\n                    }}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-add-line mr-2\"></i>\n                    Agregar Primer Producto\n                  </button>\n                </div>\n              ) : (\n                filteredProducts.map((product) => (\n                  <div key={product.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n                    {/* Selection Checkbox */}\n                    <div className=\"p-3 border-b border-gray-100\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedProducts.includes(product.id)}\n                        onChange={() => toggleProductSelection(product.id)}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                    </div>\n\n                    {/* Product Image */}\n                    <div className=\"w-full h-48 bg-gray-100 overflow-hidden\">\n                      <img\n                        src={product.imageUrl || 'https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=300&height=300&seq=placeholder003&orientation=squarish'}\n                        alt={product.name}\n                        className=\"w-full h-full object-cover object-top\"\n                        onError={(e) => {\n                          const target = e.target as HTMLImageElement;\n                          target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNTAgMTAwQzE2MS4wNDYgMTAwIDE3MCA5MC45NTQzIDE3MCA4MEM1NyA2OS4wNDU3IDE0Ny45NTQgNjAgMTM2IDYwQzEyNC45NTQgNjAgMTE2IDY5LjA0NTcgMTE2IDgwQzExNiA5MC45NTQzIDEyNC45NTQgMTAwIDEzNiAxMDBIMTUwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMTg2IDEyMEgxMTRDMTA3LjM3MyAxMjAgMTAyIDEyNS4zNzMgMTAyIDEzMlYyMDBDMTAyIDIwNi42MjcgMTA3LjM3MyAyMTIgMTE0IDIxMkgxODZDMTkyLjYyNyAyMTIgMTk4IDIwNi4yMjJgMTk0IDIwMFYxMzJDMTk0IDEyNS4zNzMgMTkyLjYyNyAxMjAgMTg2IDEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+';\n                        }}\n                      />\n                    </div>\n\n                    {/* Product Info */}\n                    <div className=\"p-4\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-xs text-gray-500\">{product.category}</span>\n                        <span className={`text-xs px-2 py-1 rounded-full ${\n                          product.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {product.status === 'active' ? 'Activo' : 'Inactivo'}\n                        </span>\n                      </div>\n\n                      <h3 className=\"font-semibold text-gray-900 mb-1 text-sm\">{product.name}</h3>\n                      <p className=\"text-xs text-gray-500 mb-2\">SKU: {product.sku}</p>\n                      \n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div>\n                          <div className=\"text-lg font-bold text-blue-600\">RD${product.price.toLocaleString()}</div>\n                          <div className=\"text-xs text-gray-500\">Costo: RD${product.cost.toLocaleString()}</div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className={`text-sm font-medium ${product.stock <= product.minStock ? 'text-red-600' : 'text-gray-900'}`}>\n                            Stock: {product.stock}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">Min: {product.minStock}</div>\n                        </div>\n                      </div>\n\n                      {product.stock <= product.minStock && (\n                        <div className=\"bg-red-50 text-red-700 text-xs p-2 rounded mb-3\">\n                          <i className=\"ri-alert-line mr-1\"></i>\n                          Stock bajo\n                        </div>\n                      )}\n\n                      {/* Actions */}\n                      <div className=\"flex space-x-2\">\n                        <button\n                          onClick={() => handleEdit(product)}\n                          className=\"flex-1 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap\"\n                        >\n                          <i className=\"ri-edit-line mr-1\"></i>\n                          Editar\n                        </button>\n                        <button\n                          onClick={() => handleDelete(product.id)}\n                          className=\"flex-1 bg-red-50 text-red-600 py-2 px-3 rounded-lg hover:bg-red-100 transition-colors text-sm whitespace-nowrap\"\n                        >\n                          <i className=\"ri-delete-bin-line mr-1\"></i>\n                          Eliminar\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Categories Tab */}\n        {activeTab === 'categories' && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex justify-between items-center\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Gestión de Categorías</h3>\n                  <button\n                    onClick={() => {\n                      resetCategoryForm();\n                      setShowCategoryModal(true);\n                    }}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-add-line mr-2\"></i>\n                    Nueva Categoría\n                  </button>\n                </div>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {categories.map((category) => {\n                    const categoryProducts = products.filter(p => p.category === category.name);\n                    const categoryValue = categoryProducts.reduce((sum, p) => sum + (p.price * p.stock), 0);\n                    \n                    return (\n                      <div key={category.id} className=\"bg-gray-50 p-4 rounded-lg border border-gray-200 hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <h4 className=\"font-medium text-gray-900 text-lg\">{category.name}</h4>\n                          <div className=\"flex space-x-2\">\n                            <button\n                              onClick={() => handleEditCategory(category)}\n                              className=\"text-blue-600 hover:text-blue-800 transition-colors\"\n                              title=\"Editar categoría\"\n                            >\n                              <i className=\"ri-edit-line\"></i>\n                            </button>\n                            <button\n                              onClick={() => handleDeleteCategory(category.id)}\n                              className=\"text-red-600 hover:text-red-800 transition-colors\"\n                              title=\"Eliminar categoría\"\n                            >\n                              <i className=\"ri-delete-bin-line\"></i>\n                            </button>\n                          </div>\n                        </div>\n                        \n                        <div className=\"space-y-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">Productos:</span>\n                            <span className=\"font-medium text-gray-900\">{categoryProducts.length}</span>\n                          </div>\n                          \n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">Valor total:</span>\n                            <span className=\"font-medium text-green-600\">RD${categoryValue.toLocaleString()}</span>\n                          </div>\n                          \n                          {categoryProducts.length > 0 && (\n                            <button\n                              onClick={() => {\n                                setActiveTab('products');\n                                setSelectedCategory(category.name);\n                                setSearchTerm('');\n                                setSelectedStatus('all');\n                              }}\n                              className=\"w-full mt-3 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap\"\n                            >\n                              <i className=\"ri-eye-line mr-2\"></i>\n                              Ver Productos\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n                \n                {categories.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <i className=\"ri-folder-line text-6xl text-gray-300 mb-4 block\"></i>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No hay categorías registradas</h3>\n                    <p className=\"text-gray-500 mb-4\">Comience creando su primera categoría de productos.</p>\n                    <button\n                      onClick={() => {\n                        resetCategoryForm();\n                        setShowCategoryModal(true);\n                      }}\n                      className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                    >\n                      <i className=\"ri-add-line mr-2\"></i>\n                      Crear Primera Categoría\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Reports Tab */}\n        {activeTab === 'reports' && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Reporte de Inventario</h3>\n                <p className=\"text-gray-600 mb-4\">Exportar lista completa de productos con stock y precios.</p>\n                <button\n                  onClick={exportToCSV}\n                  className=\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                >\n                  <i className=\"ri-download-line mr-2\"></i>\n                  Descargar Excel\n                </button>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Productos con Stock Bajo</h3>\n                <p className=\"text-gray-600 mb-4\">Lista de productos que necesitan reabastecimiento.</p>\n                <button\n                  onClick={() => {\n                    const lowStockData = products.filter(p => p.stock <= p.minStock);\n                    const headers = ['Nombre', 'SKU', 'Stock Actual', 'Stock Mínimo', 'Diferencia'];\n                    const csvContent = [\n                      headers.join(','),\n                      ...lowStockData.map(product => [\n                        `\"${product.name}\"`,\n                        product.sku,\n                        product.stock,\n                        product.minStock,\n                        product.minStock - product.stock\n                      ].join(','))\n                    ].join('\\n');\n\n                    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\n                    const link = document.createElement('a');\n                    link.href = URL.createObjectURL(blob);\n                    link.download = `stock_bajo_${new Date().toISOString().split('T')[0]}.csv`;\n                    link.click();\n                  }}\n                  className=\"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap\"\n                >\n                  <i className=\"ri-alert-line mr-2\"></i>\n                  Descargar Reporte\n                </button>\n              </div>\n\n              <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Valorización de Inventario</h3>\n                <p className=\"text-gray-600 mb-4\">Reporte financiero del valor total del inventario.</p>\n                <button\n                  onClick={() => {\n                    const headers = ['Categoría', 'Productos', 'Valor Total', 'Costo Total', 'Ganancia'];\n                    const categoryData = categories.map(cat => {\n                      const catProducts = products.filter(p => p.category === cat.name);\n                      const totalValue = catProducts.reduce((sum, p) => sum + (p.price * p.stock), 0);\n                      const totalCost = catProducts.reduce((sum, p) => sum + (p.cost * p.stock), 0);\n                      return [\n                        cat.name,\n                        catProducts.length,\n                        totalValue,\n                        totalCost,\n                        totalValue - totalCost\n                      ];\n                    });\n\n                    const csvContent = [\n                      headers.join(','),\n                      ...categoryData.map(row => row.join(','))\n                    ].join('\\n');\n\n                    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\n                    const link = document.createElement('a');\n                    link.href = URL.createObjectURL(blob);\n                    link.download = `valorizacion_${new Date().toISOString().split('T')[0]}.csv`;\n                    link.click();\n                  }}\n                  className=\"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap\"\n                >\n                  <i className=\"ri-money-dollar-circle-line mr-2\"></i>\n                  Descargar Valorización\n                </button>\n              </div>\n            </div>\n\n            {/* Statistics Summary */}\n            <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Estadísticas Generales</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-blue-600\">{totalProducts}</p>\n                  <p className=\"text-sm text-gray-600\">Total de Productos</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-green-600\">{activeProducts}</p>\n                  <p className=\"text-sm text-gray-600\">Productos Activos</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-red-600\">{lowStockProducts}</p>\n                  <p className=\"text-sm text-gray-600\">Stock Bajo</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-purple-600\">RD${totalValue.toLocaleString()}</p>\n                  <p className=\"text-sm text-gray-600\">Valor Total</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Category Modal */}\n        {showCategoryModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-lg w-full max-w-md\">\n              <div className=\"p-6\">\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\n                    {editingCategory ? 'Editar Categoría' : 'Nueva Categoría'}\n                  </h2>\n                  <button\n                    onClick={() => setShowCategoryModal(false)}\n                    className=\"text-gray-400 hover:text-gray-600\"\n                  >\n                    <i className=\"ri-close-line text-xl\"></i>\n                  </button>\n                </div>\n\n                <form onSubmit={handleCategorySubmit} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Nombre de la Categoría *\n                    </label>\n                    <input\n                      type=\"text\"\n                      required\n                      value={categoryFormData.name}\n                      onChange={(e) => setCategoryFormData(prev => ({ ...prev, name: e.target.value }))}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"Ej: Electrónicos, Ropa, Hogar...\"\n                    />\n                  </div>\n\n                  <div className=\"flex space-x-3 pt-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowCategoryModal(false)}\n                      className=\"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap\"\n                    >\n                      Cancelar\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                    >\n                      {editingCategory ? 'Actualizar' : 'Crear'} Categoría\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Product Modal */}\n        {showModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"p-6\">\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h2 className=\"text-xl font-semibold text-gray-900\">\n                    {editingProduct ? 'Editar Producto' : 'Agregar Producto'}\n                  </h2>\n                  <button\n                    onClick={() => setShowModal(false)}\n                    className=\"text-gray-400 hover:text-gray-600\"\n                  >\n                    <i className=\"ri-close-line text-xl\"></i>\n                  </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                  {/* Product Image */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Imagen del Producto\n                    </label>\n                    <div className=\"flex items-center space-x-4\">\n                      {formData.imageUrl && (\n                        <div className=\"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden\">\n                          <img\n                            src={formData.imageUrl}\n                            alt=\"Preview\"\n                            className=\"w-full h-full object-cover object-top\"\n                          />\n                        </div>\n                      )}\n                      <div className=\"flex-1\">\n                        <input\n                          ref={fileInputRef}\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleImageUpload}\n                          className=\"hidden\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 transition-colors text-center\"\n                        >\n                          <i className=\"ri-upload-cloud-line text-2xl text-gray-400 mb-2 block\"></i>\n                          <span className=\"text-sm text-gray-600\">\n                            {formData.imageUrl ? 'Cambiar imagen' : 'Subir imagen'}\n                          </span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Basic Info */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Nombre del Producto *\n                      </label>\n                      <input\n                        type=\"text\"\n                        required\n                        value={formData.name}\n                        onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        SKU *\n                      </label>\n                      <div className=\"flex\">\n                        <input\n                          type=\"text\"\n                          required\n                          value={formData.sku}\n                          onChange={(e) => setFormData(prev => ({ ...prev, sku: e.target.value }))}\n                          className=\"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setFormData(prev => ({ ...prev, sku: generateSKU() }))}\n                          className=\"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors\"\n                        >\n                          <i className=\"ri-refresh-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Categoría *\n                      </label>\n                      <select\n                        required\n                        value={formData.category}\n                        onChange={(e) => setFormData(prev => ({ ...prev, category: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8\"\n                      >\n                        <option value=\"\">Seleccionar categoría</option>\n                        {categories.map((category) => (\n                          <option key={category.id} value={category.name}>{category.name}</option>\n                        ))}\n                      </select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Código de Barras\n                      </label>\n                      <div className=\"flex\">\n                        <input\n                          type=\"text\"\n                          value={formData.barcode}\n                          onChange={(e) => setFormData(prev => ({ ...prev, barcode: e.target.value }))}\n                          className=\"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setFormData(prev => ({ ...prev, barcode: generateBarcode().toString() }))}\n                          className=\"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors\"\n                        >\n                          <i className=\"ri-refresh-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Pricing */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Precio de Venta *\n                      </label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        required\n                        value={formData.price}\n                        onChange={(e) => setFormData(prev => ({ ...prev, price: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Costo *\n                      </label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        required\n                        value={formData.cost}\n                        onChange={(e) => setFormData(prev => ({ ...prev, cost: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Inventory */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Stock Actual *\n                      </label>\n                      <input\n                        type=\"number\"\n                        required\n                        value={formData.stock}\n                        onChange={(e) => setFormData(prev => ({ ...prev, stock: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Stock Mínimo *\n                      </label>\n                      <input\n                        type=\"number\"\n                        required\n                        value={formData.minStock}\n                        onChange={(e) => setFormData(prev => ({ ...prev, minStock: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Stock Máximo *\n                      </label>\n                      <input\n                        type=\"number\"\n                        required\n                        value={formData.maxStock}\n                        onChange={(e) => setFormData(prev => ({ ...prev, maxStock: e.target.value }))}\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Additional Info */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Proveedor\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={formData.supplier}\n                      onChange={(e) => setFormData(prev => ({ ...prev, supplier: e.target.value }))}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Descripción\n                    </label>\n                    <textarea\n                      rows={3}\n                      value={formData.description}\n                      onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Estado\n                    </label>\n                    <select\n                      value={formData.status}\n                      onChange={(e) => setFormData(prev => ({ ...prev, status: e.target.value as 'active' | 'inactive' }))}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8\"\n                    >\n                      <option value=\"active\">Activo</option>\n                      <option value=\"inactive\">Inactivo</option>\n                    </select>\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex space-x-3 pt-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowModal(false)}\n                      className=\"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap\"\n                    >\n                      Cancelar\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                    >\n                      {editingProduct ? 'Actualizar' : 'Agregar'} Producto\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n"],"names":["ProductsPage","user","useAuth","products","setProducts","useState","loading","setLoading","activeTab","setActiveTab","categories","setCategories","showModal","setShowModal","showCategoryModal","setShowCategoryModal","editingProduct","setEditingProduct","editingCategory","setEditingCategory","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedStatus","setSelectedStatus","selectedProducts","setSelectedProducts","showBulkActions","setShowBulkActions","fileInputRef","useRef","formData","setFormData","categoryFormData","setCategoryFormData","useEffect","loadProducts","data","inventoryService","transformedProducts","item","error","filteredProducts","product","matchesSearch","matchesCategory","matchesStatus","totalProducts","activeProducts","p","lowStockProducts","totalValue","sum","totalCost","potentialProfit","handleImageUpload","event","file","reader","e","prev","handleSubmit","newProduct","itemData","resetForm","handleEdit","handleDelete","id","handleBulkDelete","handleBulkStatusChange","status","exportToCSV","csvContent","blob","link","generateSKU","timestamp","random","generateBarcode","toggleProductSelection","productId","selectAllProducts","handleCategorySubmit","cat","newCategory","resetCategoryForm","handleEditCategory","category","handleDeleteCategory","categoryId","productsInCategory","jsx","DashboardLayout","jsxs","target","categoryProducts","categoryValue","lowStockData","headers","categoryData","catProducts","row"],"mappings":"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"}