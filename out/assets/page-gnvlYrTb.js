import{a as M,r as d,j as e,D as F}from"./index-CQa-GowG.js";function R(){const w=M(),[D,c]=d.useState(!1),[a,g]=d.useState(null),[n,h]=d.useState(""),[x,j]=d.useState(""),[u,f]=d.useState(""),[C]=d.useState([{id:"1",assetCode:"ACT-078",assetName:"Computadora Dell Optiplex",category:"Equipo de Computación",originalCost:35e3,accumulatedDepreciation:32e3,bookValue:3e3,disposalDate:"2024-01-15",disposalMethod:"Venta",disposalReason:"Obsolescencia Tecnológica",salePrice:5e3,gainLoss:2e3,authorizedBy:"Juan Pérez",status:"Completado",notes:"Venta a empleado por actualización tecnológica",buyer:"Carlos Martínez"},{id:"2",assetCode:"ACT-134",assetName:"Vehículo Nissan Sentra 2015",category:"Vehículos",originalCost:45e4,accumulatedDepreciation:4e5,bookValue:5e4,disposalDate:"2023-12-20",disposalMethod:"Venta",disposalReason:"Fin de Vida Útil",salePrice:75e3,gainLoss:25e3,authorizedBy:"María González",status:"Completado",notes:"Venta por alto kilometraje y costos de mantenimiento",buyer:"AutoUsados SA"},{id:"3",assetCode:"ACT-089",assetName:"Maquinaria Antigua",category:"Maquinaria y Equipo",originalCost:18e4,accumulatedDepreciation:18e4,bookValue:0,disposalDate:"2024-01-10",disposalMethod:"Desecho",disposalReason:"Daño Irreparable",salePrice:0,gainLoss:0,authorizedBy:"Pedro Rodríguez",status:"Completado",notes:"Equipo dañado sin posibilidad de reparación",buyer:""},{id:"4",assetCode:"ACT-201",assetName:"Mobiliario de Oficina Antiguo",category:"Mobiliario y Equipo de Oficina",originalCost:15e3,accumulatedDepreciation:12e3,bookValue:3e3,disposalDate:"2024-02-01",disposalMethod:"Donación",disposalReason:"Renovación de Oficinas",salePrice:0,gainLoss:-3e3,authorizedBy:"Ana López",status:"Pendiente",notes:"Donación a institución educativa",buyer:"Escuela Primaria San José"}]),y=["Venta","Donación","Desecho","Intercambio","Transferencia"],k=["Obsolescencia Tecnológica","Fin de Vida Útil","Daño Irreparable","Renovación de Equipos","Falta de Uso","Cambio de Operaciones"],o=C.filter(s=>{const r=s.assetName.toLowerCase().includes(n.toLowerCase())||s.assetCode.toLowerCase().includes(n.toLowerCase()),p=!x||s.status===x,b=!u||s.disposalMethod===u;return r&&p&&b}),m=o.reduce((s,r)=>s+r.gainLoss,0),N=o.reduce((s,r)=>s+r.salePrice,0),v=o.reduce((s,r)=>s+r.bookValue,0),V=()=>{g(null),c(!0)},A=s=>{g(s),c(!0)},E=s=>{confirm("¿Está seguro de que desea eliminar este registro de baja?")&&alert("Registro de baja eliminado correctamente")},S=s=>{confirm("¿Está seguro de que desea aprobar esta baja de activo?")&&alert("Baja de activo aprobada correctamente")},L=s=>{s.preventDefault(),alert(a?"Baja de activo actualizada correctamente":"Baja de activo registrada correctamente"),c(!1)},P=()=>{const s=o,r=["Código Activo","Nombre del Activo","Categoría","Costo Original","Depreciación Acumulada","Valor en Libros","Fecha de Disposición","Método de Disposición","Motivo de Disposición","Precio de Venta","Ganancia/Pérdida","Comprador/Receptor","Autorizado Por","Estado","Notas"],p=[["RETIRO DE ACTIVOS FIJOS"],[`Reporte generado: ${new Date().toLocaleDateString("es-DO")} ${new Date().toLocaleTimeString("es-DO")}`],[""],["RESUMEN DE BAJAS DE ACTIVOS"],["Ganancia/Pérdida Total",m.toFixed(2)],["Valor de Venta Total",N.toFixed(2)],["Valor en Libros Total",v.toFixed(2)],["Total de Activos Dados de Baja",s.length],[""],["FILTROS APLICADOS"],["Búsqueda",n||"Ninguno"],["Estado",x||"Todos"],["Método de Disposición",u||"Todos"],[""],["DETALLE DE BAJAS DE ACTIVOS"],r,...s.map(t=>[t.assetCode,t.assetName,t.category,t.originalCost.toFixed(2),t.accumulatedDepreciation.toFixed(2),t.bookValue.toFixed(2),new Date(t.disposalDate).toLocaleDateString("es-DO"),t.disposalMethod,t.disposalReason,t.salePrice.toFixed(2),t.gainLoss.toFixed(2),t.buyer,t.authorizedBy,t.status,t.notes])].map(t=>t.join(",")).join(`
`),b=new Blob(["\uFEFF"+p],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),T=URL.createObjectURL(b);i.setAttribute("href",T),i.setAttribute("download",`retiro_activos_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},l=s=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(s);return e.jsx(F,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w("/fixed-assets"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-2",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Volver a Activos Fijos"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Retiro de Activos"}),e.jsx("p",{className:"text-gray-600",children:"Gestión de bajas y disposición de activos fijos"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:P,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Exportar Excel"]}),e.jsxs("button",{onClick:V,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Baja"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ganancia/Pérdida Total"}),e.jsx("p",{className:`text-2xl font-bold ${m>=0?"text-green-600":"text-red-600"}`,children:l(m)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100",children:e.jsx("i",{className:"ri-exchange-line text-xl text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor de Venta Total"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l(N)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-green-100",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor en Libros"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:l(v)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-orange-100",children:e.jsx("i",{className:"ri-book-line text-xl text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activos Dados de Baja"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-purple-100",children:e.jsx("i",{className:"ri-delete-bin-line text-xl text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por activo o código...",value:n,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:x,onChange:s=>j(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En Proceso",children:"En Proceso"}),e.jsx("option",{value:"Completado",children:"Completado"}),e.jsx("option",{value:"Cancelado",children:"Cancelado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Disposición"}),e.jsxs("select",{value:u,onChange:s=>f(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los métodos"}),y.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{h(""),j(""),f("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors whitespace-nowrap",children:"Limpiar Filtros"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Bajas de Activos Registradas (",o.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor en Libros"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio de Venta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ganancia/Pérdida"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.assetName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.assetCode," - ",s.category]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l(s.bookValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l(s.salePrice)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("span",{className:s.gainLoss>=0?"text-green-600":"text-red-600",children:[s.gainLoss>=0?"+":"",l(s.gainLoss)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.disposalMethod}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.disposalDate).toLocaleDateString("es-DO")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="Completado"?"bg-green-100 text-green-800":s.status==="Pendiente"?"bg-yellow-100 text-yellow-800":s.status==="En Proceso"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(s),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:e.jsx("i",{className:"ri-edit-line"})}),s.status==="Pendiente"&&e.jsx("button",{onClick:()=>S(s.id),className:"text-green-600 hover:text-green-900",title:"Aprobar",children:e.jsx("i",{className:"ri-check-line"})}),e.jsx("button",{onClick:()=>E(s.id),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},s.id))})]})})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a?"Editar Baja de Activo":"Nueva Baja de Activo"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código del Activo *"}),e.jsx("input",{type:"text",required:!0,defaultValue:a?.assetCode||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ACT-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor en Libros *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",defaultValue:a?.bookValue||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Venta"}),e.jsx("input",{type:"number",step:"0.01",defaultValue:a?.salePrice||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Disposición *"}),e.jsx("input",{type:"date",required:!0,defaultValue:a?.disposalDate||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Disposición *"}),e.jsxs("select",{required:!0,defaultValue:a?.disposalMethod||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar método"}),y.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de Disposición *"}),e.jsxs("select",{required:!0,defaultValue:a?.disposalReason||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar motivo"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprador/Receptor"}),e.jsx("input",{type:"text",defaultValue:a?.buyer||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del comprador o receptor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Autorizado por *"}),e.jsx("input",{type:"text",required:!0,defaultValue:a?.authorizedBy||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del autorizador"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas y Observaciones"}),e.jsx("textarea",{rows:4,defaultValue:a?.notes||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Detalles adicionales sobre la disposición del activo"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[a?"Actualizar":"Registrar"," Baja"]})]})]})]})})]})})}export{R as default};
//# sourceMappingURL=page-gnvlYrTb.js.map
