import{a as R,r as c,j as e,D as P}from"./index-CQa-GowG.js";function L(){const f=R(),[q,T]=c.useState(!1),[N,n]=c.useState(!1),[o,h]=c.useState(""),[d,p]=c.useState(""),[x,g]=c.useState(""),[v]=c.useState([{id:"1",assetCode:"ACT-001",assetName:"Edificio Principal",category:"Edificios y Construcciones",acquisitionCost:42e5,accumulatedDepreciation:42e4,monthlyDepreciation:7e3,remainingValue:378e4,depreciationDate:"2024-01-01",period:"2024-01",status:"Calculado",method:"Línea Recta"},{id:"2",assetCode:"ACT-045",assetName:"Maquinaria Industrial A",category:"Maquinaria y Equipo",acquisitionCost:28e4,accumulatedDepreciation:14e4,monthlyDepreciation:2333,remainingValue:14e4,depreciationDate:"2024-01-01",period:"2024-01",status:"Calculado",method:"Línea Recta"},{id:"3",assetCode:"ACT-123",assetName:"Vehículo Toyota Hilux",category:"Vehículos",acquisitionCost:85e3,accumulatedDepreciation:85e3,monthlyDepreciation:1417,remainingValue:68e3,depreciationDate:"2024-01-01",period:"2024-01",status:"Calculado",method:"Línea Recta"},{id:"4",assetCode:"ACT-089",assetName:"Servidor Dell PowerEdge",category:"Equipo de Computación",acquisitionCost:45e3,accumulatedDepreciation:11250,monthlyDepreciation:938,remainingValue:33750,depreciationDate:"2024-01-01",period:"2024-01",status:"Calculado",method:"Línea Recta"},{id:"5",assetCode:"ACT-156",assetName:"Mobiliario de Oficina",category:"Mobiliario y Equipo de Oficina",acquisitionCost:25e3,accumulatedDepreciation:1250,monthlyDepreciation:208,remainingValue:23750,depreciationDate:"2024-01-01",period:"2024-01",status:"Pendiente",method:"Línea Recta"}]),w=["2024-01","2023-12","2023-11","2023-10"],r=v.filter(s=>{const a=s.assetName.toLowerCase().includes(o.toLowerCase())||s.assetCode.toLowerCase().includes(o.toLowerCase()),m=!d||s.period===d,u=!x||s.status===x;return a&&m&&u}),b=r.reduce((s,a)=>s+a.monthlyDepreciation,0),j=r.reduce((s,a)=>s+a.accumulatedDepreciation,0),y=r.reduce((s,a)=>s+a.remainingValue,0),C=()=>{n(!0)},D=s=>{s.preventDefault(),alert("Depreciación calculada y registrada correctamente"),n(!1)},E=s=>{alert(`Mostrando detalles de la depreciación ${s}`)},k=s=>{confirm("¿Está seguro de que desea reversar esta depreciación?")&&alert("Depreciación reversada correctamente")},A=()=>{const s=r,a=["Código Activo","Nombre del Activo","Categoría","Costo Adquisición","Depreciación Mensual","Depreciación Acumulada","Valor Remanente","Fecha Depreciación","Período","Método Depreciación","Estado"],m=[["DEPRECIACIÓN DE ACTIVOS FIJOS"],[`Reporte generado: ${new Date().toLocaleDateString("es-DO")} ${new Date().toLocaleTimeString("es-DO")}`],[""],["RESUMEN DE DEPRECIACIONES"],["Depreciación del Mes",b.toFixed(2)],["Depreciación Acumulada Total",j.toFixed(2)],["Valor Remanente Total",y.toFixed(2)],["Total de Activos",s.length],[""],["FILTROS APLICADOS"],["Búsqueda",o||"Ninguno"],["Período",d||"Todos"],["Estado",x||"Todos"],[""],["DETALLE DE DEPRECIACIONES"],a,...s.map(t=>[t.assetCode,t.assetName,t.category,t.acquisitionCost.toFixed(2),t.monthlyDepreciation.toFixed(2),t.accumulatedDepreciation.toFixed(2),t.remainingValue.toFixed(2),new Date(t.depreciationDate).toLocaleDateString("es-DO"),t.period,t.method,t.status])].map(t=>t.join(",")).join(`
`),u=new Blob(["\uFEFF"+m],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),S=URL.createObjectURL(u);l.setAttribute("href",S),l.setAttribute("download",`depreciaciones_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},i=s=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(s);return e.jsx(P,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>f("/fixed-assets"),className:"flex items-center text-blue-600 hover:text-blue-700 mb-2",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Volver a Activos Fijos"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Depreciación de Activos"}),e.jsx("p",{className:"text-gray-600",children:"Cálculo y registro de depreciaciones mensuales"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:A,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Exportar Excel"]}),e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-calculator-line mr-2"}),"Calcular Depreciación"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Depreciación del Mes"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i(b)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100",children:e.jsx("i",{className:"ri-calendar-line text-xl text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Depreciación Acumulada"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i(j)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-red-100",children:e.jsx("i",{className:"ri-line-chart-line text-xl text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Remanente"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i(y)})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-green-100",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activos Depreciados"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-purple-100",children:e.jsx("i",{className:"ri-archive-line text-xl text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por activo o código...",value:o,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Período"}),e.jsxs("select",{value:d,onChange:s=>p(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los períodos"}),w.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:x,onChange:s=>g(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"Calculado",children:"Calculado"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Reversado",children:"Reversado"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{h(""),p(""),g("")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors whitespace-nowrap",children:"Limpiar Filtros"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Depreciaciones Registradas (",r.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Costo Adquisición"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depreciación Mensual"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depreciación Acumulada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Remanente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Período"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.assetName}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.assetCode," - ",s.category]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i(s.acquisitionCost)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:["-",i(s.monthlyDepreciation)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:["-",i(s.accumulatedDepreciation)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:i(s.remainingValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.period}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="Calculado"?"bg-green-100 text-green-800":s.status==="Pendiente"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(s.id),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:e.jsx("i",{className:"ri-eye-line"})}),s.status==="Calculado"&&e.jsx("button",{onClick:()=>k(s.id),className:"text-red-600 hover:text-red-900",title:"Reversar depreciación",children:e.jsx("i",{className:"ri-arrow-go-back-line"})})]})})]},s.id))})]})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Calcular Depreciación Mensual"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Período de Depreciación *"}),e.jsx("input",{type:"month",required:!0,defaultValue:"2024-01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Proceso *"}),e.jsx("input",{type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categorías a Incluir"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Edificios y Construcciones"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Maquinaria y Equipo"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Vehículos"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Mobiliario y Equipo de Oficina"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Equipo de Computación"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Resumen del Cálculo"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("p",{children:"• Activos a depreciar: 5"}),e.jsxs("p",{children:["• Depreciación total estimada: ",i(11896)]}),e.jsx("p",{children:"• Período: Enero 2024"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Procesar Depreciación"})]})]})]})})]})})}export{L as default};
//# sourceMappingURL=page-DF3adFc1.js.map
