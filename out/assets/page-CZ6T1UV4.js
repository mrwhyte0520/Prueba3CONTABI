import{r as l,e as u,j as e,D as w}from"./index-CQa-GowG.js";function _(){const[t,g]=l.useState({itbis_rate:18,isr_rate:27,withholding_itbis:30,withholding_isr:10,ncf_enabled:!0,ncf_sequence:"B01",ecf_enabled:!1,tax_period:"monthly"}),[p,h]=l.useState([]),[f,i]=l.useState(!1),[d,c]=l.useState({name:"",rate:0,type:"itbis"}),[o,x]=l.useState(!1),[m,n]=l.useState(null);l.useEffect(()=>{y(),b()},[]);const y=async()=>{try{const s=await u.getTaxSettings();s&&g(s)}catch(s){console.error("Error loading tax settings:",s)}},b=async()=>{try{const s=await u.getTaxRates();h(s)}catch(s){console.error("Error loading tax rates:",s)}},j=async s=>{s.preventDefault(),x(!0),n(null);try{await u.saveTaxSettings(t),n({type:"success",text:"Configuración de impuestos guardada exitosamente"})}catch{n({type:"error",text:"Error al guardar la configuración"})}finally{x(!1)}},N=async s=>{s.preventDefault(),x(!0);try{await u.createTaxRate(d),n({type:"success",text:"Tasa de impuesto creada exitosamente"}),i(!1),c({name:"",rate:0,type:"itbis"}),b()}catch{n({type:"error",text:"Error al crear la tasa de impuesto"})}finally{x(!1)}},r=(s,a)=>{g(v=>({...v,[s]:a}))};return e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración de Impuestos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configura tipos de impuestos, tasas y reglas fiscales"})]}),e.jsxs("button",{onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[e.jsx("i",{className:"ri-arrow-left-line"}),e.jsx("span",{children:"Volver a Configuración"})]})]})}),m&&e.jsx("div",{className:`p-4 rounded-lg ${m.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:m.text}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tasas Principales de Impuestos"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ITBIS (%) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",required:!0,value:t.itbis_rate,onChange:s=>r("itbis_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ISR (%) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",required:!0,value:t.isr_rate,onChange:s=>r("isr_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retención ITBIS (%) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",required:!0,value:t.withholding_itbis,onChange:s=>r("withholding_itbis",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retención ISR (%) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",required:!0,value:t.withholding_isr,onChange:s=>r("withholding_isr",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuración NCF/E-CF"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"ncf_enabled",checked:t.ncf_enabled,onChange:s=>r("ncf_enabled",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"ncf_enabled",className:"ml-2 block text-sm text-gray-900",children:"Habilitar NCF"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"ecf_enabled",checked:t.ecf_enabled,onChange:s=>r("ecf_enabled",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"ecf_enabled",className:"ml-2 block text-sm text-gray-900",children:"Habilitar E-CF"})]})]}),t.ncf_enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secuencia NCF"}),e.jsxs("select",{value:t.ncf_sequence,onChange:s=>r("ncf_sequence",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"B01",children:"B01 - Crédito Fiscal"}),e.jsx("option",{value:"B02",children:"B02 - Consumidor Final"}),e.jsx("option",{value:"B03",children:"B03 - Nota de Débito"}),e.jsx("option",{value:"B04",children:"B04 - Nota de Crédito"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Período de Declaración"}),e.jsxs("select",{value:t.tax_period,onChange:s=>r("tax_period",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"Mensual"}),e.jsx("option",{value:"quarterly",children:"Trimestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Guardando...":"Guardar Cambios"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tasas de Impuestos Personalizadas"}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx("i",{className:"ri-add-line"}),e.jsx("span",{children:"Nueva Tasa"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tasa (%)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.type==="itbis"?"bg-blue-100 text-blue-800":s.type==="isr"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.type.toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.rate,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.active?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},s.id))})]})})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nueva Tasa de Impuesto"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),e.jsx("input",{type:"text",required:!0,value:d.name,onChange:s=>c(a=>({...a,name:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),e.jsxs("select",{required:!0,value:d.type,onChange:s=>c(a=>({...a,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"itbis",children:"ITBIS"}),e.jsx("option",{value:"isr",children:"ISR"}),e.jsx("option",{value:"other",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa (%) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",required:!0,value:d.rate,onChange:s=>c(a=>({...a,rate:parseFloat(s.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Creando...":"Crear Tasa"})]})]})]})})]})}export{_ as default};
//# sourceMappingURL=page-CZ6T1UV4.js.map
