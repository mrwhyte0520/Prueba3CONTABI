{"version":3,"file":"page-eDcs7To6.js","sources":["../../src/hooks/usePlanLimitations.ts","../../src/components/common/FeatureGuard.tsx","../../src/pages/dashboard/components/BasicDashboard.tsx","../../src/pages/dashboard/components/AdvancedKPIDashboard.tsx","../../src/pages/dashboard/page.tsx"],"sourcesContent":["import { usePlans } from './usePlans';\n\nexport interface PlanLimitations {\n  maxCompanies: number;\n  maxUsers: number;\n  maxProducts: number;\n  maxEmployees: number;\n  hasAdvancedReports: boolean;\n  hasBankingManagement: boolean;\n  hasAdvancedAnalytics: boolean;\n  hasPayroll: boolean;\n  hasMultiBranch: boolean;\n  hasElectronicInvoicing: boolean;\n  hasFixedAssets: boolean;\n  hasInventoryManagement: boolean;\n  hasAccountingPeriods: boolean;\n  hasGeneralJournal: boolean;\n  hasGeneralLedger: boolean;\n  hasChartOfAccounts: boolean;\n  hasFinancialStatements: boolean;\n  hasBankReconciliation: boolean;\n  hasTaxReports: boolean;\n  hasAccountsPayable: boolean;\n  hasAccountsReceivable: boolean;\n  hasBilling: boolean;\n  hasPOS: boolean;\n}\n\nexport function usePlanLimitations() {\n  const { currentPlan, hasAccess } = usePlans();\n\n  const getPlanLimitations = (): PlanLimitations => {\n    if (!hasAccess() || !currentPlan?.active) {\n      // Sin plan activo - solo acceso básico durante trial\n      return {\n        maxCompanies: 1,\n        maxUsers: 1,\n        maxProducts: 50,\n        maxEmployees: 0,\n        hasAdvancedReports: false,\n        hasBankingManagement: false,\n        hasAdvancedAnalytics: false,\n        hasPayroll: false,\n        hasMultiBranch: false,\n        hasElectronicInvoicing: false,\n        hasFixedAssets: false,\n        hasInventoryManagement: true,\n        hasAccountingPeriods: true,\n        hasGeneralJournal: true,\n        hasGeneralLedger: true,\n        hasChartOfAccounts: true,\n        hasFinancialStatements: false,\n        hasBankReconciliation: false,\n        hasTaxReports: false,\n        hasAccountsPayable: false,\n        hasAccountsReceivable: false,\n        hasBilling: true,\n        hasPOS: false\n      };\n    }\n\n    switch (currentPlan.id) {\n      case 'pyme':\n        return {\n          maxCompanies: 1,\n          maxUsers: 2,\n          maxProducts: 500,\n          maxEmployees: 0,\n          hasAdvancedReports: false,\n          hasBankingManagement: false,\n          hasAdvancedAnalytics: false,\n          hasPayroll: false,\n          hasMultiBranch: false,\n          hasElectronicInvoicing: false,\n          hasFixedAssets: true,\n          hasInventoryManagement: true,\n          hasAccountingPeriods: true,\n          hasGeneralJournal: true,\n          hasGeneralLedger: true,\n          hasChartOfAccounts: true,\n          hasFinancialStatements: true,\n          hasBankReconciliation: false,\n          hasTaxReports: true,\n          hasAccountsPayable: false,\n          hasAccountsReceivable: false,\n          hasBilling: true,\n          hasPOS: false\n        };\n\n      case 'pro':\n        return {\n          maxCompanies: 3,\n          maxUsers: 5,\n          maxProducts: 2000,\n          maxEmployees: 10,\n          hasAdvancedReports: true,\n          hasBankingManagement: true,\n          hasAdvancedAnalytics: false,\n          hasPayroll: true,\n          hasMultiBranch: false,\n          hasElectronicInvoicing: false,\n          hasFixedAssets: true,\n          hasInventoryManagement: true,\n          hasAccountingPeriods: true,\n          hasGeneralJournal: true,\n          hasGeneralLedger: true,\n          hasChartOfAccounts: true,\n          hasFinancialStatements: true,\n          hasBankReconciliation: true,\n          hasTaxReports: true,\n          hasAccountsPayable: true,\n          hasAccountsReceivable: true,\n          hasBilling: true,\n          hasPOS: true\n        };\n\n      case 'plus':\n      case 'student':\n        return {\n          maxCompanies: -1, // Ilimitado\n          maxUsers: -1, // Ilimitado\n          maxProducts: -1, // Ilimitado\n          maxEmployees: -1, // Ilimitado\n          hasAdvancedReports: true,\n          hasBankingManagement: true,\n          hasAdvancedAnalytics: true,\n          hasPayroll: true,\n          hasMultiBranch: true,\n          hasElectronicInvoicing: true,\n          hasFixedAssets: true,\n          hasInventoryManagement: true,\n          hasAccountingPeriods: true,\n          hasGeneralJournal: true,\n          hasGeneralLedger: true,\n          hasChartOfAccounts: true,\n          hasFinancialStatements: true,\n          hasBankReconciliation: true,\n          hasTaxReports: true,\n          hasAccountsPayable: true,\n          hasAccountsReceivable: true,\n          hasBilling: true,\n          hasPOS: true\n        };\n\n      default:\n        return getPlanLimitations(); // Fallback a sin plan\n    }\n  };\n\n  const limitations = getPlanLimitations();\n\n  const checkFeatureAccess = (feature: keyof PlanLimitations): boolean => {\n    return limitations[feature] as boolean;\n  };\n\n  const checkQuantityLimit = (\n    feature: 'maxCompanies' | 'maxUsers' | 'maxProducts' | 'maxEmployees',\n    currentCount: number\n  ): { allowed: boolean; limit: number; message?: string } => {\n    const limit = limitations[feature];\n    \n    if (limit === -1) {\n      return { allowed: true, limit: -1 };\n    }\n\n    const allowed = currentCount < limit;\n    const message = allowed \n      ? undefined \n      : `Has alcanzado el límite de ${limit} ${getFeatureName(feature)} para tu plan ${currentPlan?.name || 'actual'}.`;\n\n    return { allowed, limit, message };\n  };\n\n  const getFeatureName = (feature: string): string => {\n    const names: Record<string, string> = {\n      maxCompanies: 'empresas',\n      maxUsers: 'usuarios',\n      maxProducts: 'productos',\n      maxEmployees: 'empleados'\n    };\n    return names[feature] || feature;\n  };\n\n  const getUpgradeMessage = (): string => {\n    const currentPlanName = currentPlan?.name || 'actual';\n    \n    if (!currentPlan?.active) {\n      return 'Necesitas una suscripción activa para acceder a esta función.';\n    }\n\n    switch (currentPlan.id) {\n      case 'pyme':\n        return `Esta función requiere el plan PRO o superior. Tu plan ${currentPlanName} no incluye esta característica.`;\n      case 'pro':\n        return `Esta función requiere el plan PLUS. Tu plan ${currentPlanName} no incluye esta característica.`;\n      default:\n        return `Esta función no está disponible en tu plan ${currentPlanName}.`;\n    }\n  };\n\n  return {\n    limitations,\n    checkFeatureAccess,\n    checkQuantityLimit,\n    getUpgradeMessage,\n    currentPlan: currentPlan?.name || 'Sin plan'\n  };\n}","import type { ReactNode } from 'react';\nimport { Link } from 'react-router-dom';\nimport { usePlanLimitations } from '../../hooks/usePlanLimitations';\n\ninterface FeatureGuardProps {\n  children: ReactNode;\n  feature: keyof import('../../hooks/usePlanLimitations').PlanLimitations;\n  fallback?: ReactNode;\n  showUpgradePrompt?: boolean;\n}\n\nexport function FeatureGuard({ \n  children, \n  feature, \n  fallback,\n  showUpgradePrompt = true \n}: FeatureGuardProps) {\n  const { checkFeatureAccess, getUpgradeMessage, currentPlan } = usePlanLimitations();\n\n  const hasAccess = checkFeatureAccess(feature);\n\n  if (hasAccess) {\n    return <>{children}</>;\n  }\n\n  if (fallback) {\n    return <>{fallback}</>;\n  }\n\n  if (!showUpgradePrompt) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-8 text-center border-2 border-dashed border-gray-300\">\n      <div className=\"max-w-md mx-auto\">\n        <div className=\"mb-4\">\n          <i className=\"ri-lock-line text-4xl text-gray-400 mb-3\"></i>\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">\n            Función No Disponible\n          </h3>\n          <p className=\"text-gray-600 text-sm mb-4\">\n            {getUpgradeMessage()}\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-lg p-4 mb-4 border border-gray-200\">\n          <div className=\"flex items-center justify-center mb-2\">\n            <i className=\"ri-vip-crown-line text-blue-500 mr-2\"></i>\n            <span className=\"font-semibold text-gray-700\">Plan Actual</span>\n          </div>\n          <div className=\"text-lg font-bold text-blue-600\">\n            {currentPlan}\n          </div>\n        </div>\n\n        <Link\n          to=\"/plans\"\n          className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-200 whitespace-nowrap\"\n        >\n          <i className=\"ri-arrow-up-line mr-2\"></i>\n          Actualizar Plan\n        </Link>\n\n        <p className=\"text-xs text-gray-500 mt-3\">\n          Mejora tu plan para acceder a todas las funciones\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default FeatureGuard;\n","import { useState, useEffect } from 'react';\nimport { FeatureGuard } from '../../../components/common/FeatureGuard';\nimport { useAuth } from '../../../hooks/useAuth';\nimport { chartAccountsService, invoicesService } from '../../../services/database';\n\nexport default function BasicDashboard() {\n  const { user } = useAuth();\n  const [totalRevenue, setTotalRevenue] = useState(0);\n  const [totalExpenses, setTotalExpenses] = useState(0);\n  const [netProfit, setNetProfit] = useState(0);\n  const [pendingInvoices, setPendingInvoices] = useState(0);\n  const [pendingAmount, setPendingAmount] = useState(0);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const uid = user?.id || '';\n        const now = new Date();\n        const start = new Date(now.getFullYear(), now.getMonth(), 1);\n        const end = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n        const fromDate = start.toISOString().slice(0, 10);\n        const toDate = end.toISOString().slice(0, 10);\n\n        const [incomeStmt, invoices] = await Promise.all([\n          chartAccountsService.generateIncomeStatement(uid, fromDate, toDate),\n          invoicesService.getAll(uid)\n        ]);\n\n        const revenue = incomeStmt.totalIncome || 0;\n        const expenses = incomeStmt.totalExpenses || 0;\n        const profit = incomeStmt.netIncome || 0;\n\n        setTotalRevenue(revenue);\n        setTotalExpenses(expenses);\n        setNetProfit(profit);\n\n        const pendings = (invoices || []).filter((inv: any) => {\n          const status = (inv.status || '').toLowerCase();\n          return status === 'pending' || status === 'unpaid' || status === 'vencida';\n        });\n        setPendingInvoices(pendings.length);\n        const amount = pendings.reduce((sum: number, inv: any) => sum + (inv.total_amount || inv.total || 0), 0);\n        setPendingAmount(amount);\n      } catch {\n        setTotalRevenue(0);\n        setTotalExpenses(0);\n        setNetProfit(0);\n        setPendingInvoices(0);\n        setPendingAmount(0);\n      }\n    };\n    fetchData();\n  }, [user]);\n\n  const formatCurrency = (amount: number) => new Intl.NumberFormat('es-DO', { style: 'currency', currency: 'DOP' }).format(amount);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Métricas Principales */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Ingresos del Mes</p>\n              <p className=\"text-2xl font-bold text-green-600\">{formatCurrency(totalRevenue)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-money-dollar-circle-line text-green-600 text-xl\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Gastos del Mes</p>\n              <p className=\"text-2xl font-bold text-red-600\">{formatCurrency(totalExpenses)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-shopping-cart-line text-red-600 text-xl\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Utilidad Neta</p>\n              <p className=\"text-2xl font-bold text-blue-600\">{formatCurrency(netProfit)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-line-chart-line text-blue-600 text-xl\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Facturas Pendientes</p>\n              <p className=\"text-2xl font-bold text-orange-600\">{pendingInvoices}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-file-list-3-line text-orange-600 text-xl\"></i>\n            </div>\n          </div>\n          <div className=\"mt-4 flex items-center text-sm\">\n            <span className=\"text-orange-600 font-medium\">{formatCurrency(pendingAmount)}</span>\n            <span className=\"text-gray-500 ml-2\">por cobrar</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Gráficos */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <FeatureGuard feature=\"hasAdvancedAnalytics\" fallback={\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Ingresos vs Gastos</h3>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <i className=\"ri-bar-chart-line text-4xl text-gray-400 mb-2\"></i>\n                <p className=\"text-gray-500\">Gráfico disponible en plan PRO</p>\n              </div>\n            </div>\n          </div>\n        }>\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Ingresos vs Gastos</h3>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <i className=\"ri-bar-chart-line text-4xl text-gray-400 mb-2\"></i>\n                <p className=\"text-gray-500\">Gráfico de barras aquí</p>\n              </div>\n            </div>\n          </div>\n        </FeatureGuard>\n\n        <FeatureGuard feature=\"hasAdvancedAnalytics\" fallback={\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Distribución de Gastos</h3>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <i className=\"ri-pie-chart-line text-4xl text-gray-400 mb-2\"></i>\n                <p className=\"text-gray-500\">Gráfico disponible en plan PRO</p>\n              </div>\n            </div>\n          </div>\n        }>\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Distribución de Gastos</h3>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <i className=\"ri-pie-chart-line text-4xl text-gray-400 mb-2\"></i>\n                <p className=\"text-gray-500\">Gráfico circular aquí</p>\n              </div>\n            </div>\n          </div>\n        </FeatureGuard>\n      </div>\n\n      \n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useAuth } from '../../../hooks/useAuth';\nimport { chartAccountsService, invoicesService } from '../../../services/database';\n\ninterface KPIData {\n  totalRevenue: number;\n  totalExpenses: number;\n  netProfit: number;\n  pendingInvoices: number;\n  cashFlow: number;\n  profitMargin: number;\n  liquidityRatio: number;\n  efficiency: number;\n  monthlyGrowth: number;\n  customerSatisfaction: number;\n}\n\ninterface ChartData {\n  month: string;\n  ingresos: number;\n  gastos: number;\n}\n\ninterface ExpenseData {\n  category: string;\n  amount: number;\n  color: string;\n}\n\nexport default function AdvancedKPIDashboard() {\n  const { user } = useAuth();\n  const [kpiData, setKpiData] = useState<KPIData>({\n    totalRevenue: 0,\n    totalExpenses: 0,\n    netProfit: 0,\n    pendingInvoices: 0,\n    cashFlow: 0,\n    profitMargin: 0,\n    liquidityRatio: 0,\n    efficiency: 0,\n    monthlyGrowth: 0,\n    customerSatisfaction: 0\n  });\n  const [chartData, setChartData] = useState<ChartData[]>([]);\n  const [expenseData, setExpenseData] = useState<ExpenseData[]>([]);\n  const [pendingAmount, setPendingAmount] = useState(0);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const uid = user?.id || '';\n        // Rango del mes actual\n        const now = new Date();\n        const start = new Date(now.getFullYear(), now.getMonth(), 1);\n        const end = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n        const fromDate = start.toISOString().slice(0, 10);\n        const toDate = end.toISOString().slice(0, 10);\n\n        const [incomeStmt, cashFlowRes, invoices] = await Promise.all([\n          chartAccountsService.generateIncomeStatement(uid, fromDate, toDate),\n          chartAccountsService.generateCashFlowStatement(uid, fromDate, toDate),\n          invoicesService.getAll(uid)\n        ]);\n\n        const totalRevenue = incomeStmt.totalIncome || 0;\n        const totalExpenses = incomeStmt.totalExpenses || 0;\n        const netProfit = incomeStmt.netIncome || 0;\n        const cashFlow = cashFlowRes.netCashFlow || 0;\n        const pendingInvoices = (invoices || []).filter((inv: any) => {\n          const status = (inv.status || '').toLowerCase();\n          return status === 'pending' || status === 'unpaid' || status === 'vencida';\n        }).length;\n        const pendingAmountCalc = (invoices || []).filter((inv: any) => {\n          const status = (inv.status || '').toLowerCase();\n          return status === 'pending' || status === 'unpaid' || status === 'vencida';\n        }).reduce((sum: number, inv: any) => sum + (inv.total_amount || inv.total || 0), 0);\n\n        const profitMargin = totalRevenue > 0 ? (netProfit / totalRevenue) * 100 : 0;\n\n        setKpiData(prev => ({\n          ...prev,\n          totalRevenue,\n          totalExpenses,\n          netProfit,\n          cashFlow,\n          pendingInvoices,\n          profitMargin,\n        }));\n        setPendingAmount(pendingAmountCalc);\n\n        // Datos para gráfico: una sola barra del mes actual\n        setChartData([{ month: now.toLocaleString('es-DO', { month: 'short' }), ingresos: totalRevenue, gastos: totalExpenses }]);\n\n        // Distribución de gastos: si hay detalle disponible, podríamos armar por categorías.\n        // De momento, dejamos vacío para evitar datos de prueba.\n        setExpenseData([]);\n      } catch (e) {\n        // En caso de error, dejamos los datos en cero (sin mocks)\n        setChartData([]);\n        setExpenseData([]);\n      }\n    };\n\n    fetchData();\n  }, [user]);\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('es-DO', {\n      style: 'currency',\n      currency: 'DOP'\n    }).format(amount);\n  };\n\n  const formatPercentage = (value: number) => {\n    return `${value.toFixed(1)}%`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Ingresos Totales</p>\n              <p className=\"text-2xl font-bold text-green-600\">{formatCurrency(kpiData.totalRevenue)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\">\n              <i className=\"ri-money-dollar-circle-line text-2xl text-green-600\"></i>\n            </div>\n          </div>\n          <div className=\"mt-4 flex items-center\">\n            <span className=\"text-sm text-green-600 font-medium\">+{formatPercentage(kpiData.monthlyGrowth)}</span>\n            <span className=\"text-sm text-gray-500 ml-2\">vs mes anterior</span>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Gastos Totales</p>\n              <p className=\"text-2xl font-bold text-red-600\">{formatCurrency(kpiData.totalExpenses)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center\">\n              <i className=\"ri-money-dollar-circle-line text-2xl text-red-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Utilidad Neta</p>\n              <p className=\"text-2xl font-bold text-blue-600\">{formatCurrency(kpiData.netProfit)}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n              <i className=\"ri-line-chart-line text-2xl text-blue-600\"></i>\n            </div>\n          </div>\n          <div className=\"mt-4 flex items-center\">\n            <span className=\"text-sm text-blue-600 font-medium\">Margen: {formatPercentage(kpiData.profitMargin)}</span>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Facturas Pendientes</p>\n              <p className=\"text-2xl font-bold text-orange-600\">{kpiData.pendingInvoices}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center\">\n              <i className=\"ri-file-list-3-line text-2xl text-orange-600\"></i>\n            </div>\n          </div>\n          <div className=\"mt-4 flex items-center\">\n            <span className=\"text-sm text-orange-600 font-medium\">Valor: {formatCurrency(pendingAmount)}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Charts Row */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Revenue vs Expenses Chart */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Ingresos vs Gastos</h3>\n          {(() => {\n            const maxValue = Math.max(1, ...chartData.flatMap(d => [d.ingresos, d.gastos]));\n            return (\n              <div className=\"h-64 flex items-end justify-between space-x-2\">\n                {chartData.map((data, index) => (\n                  <div key={index} className=\"flex flex-col items-center space-y-2 flex-1\">\n                    <div className=\"flex items-end space-x-1 h-48\">\n                      <div \n                        className=\"bg-green-500 rounded-t w-4\"\n                        style={{ height: `${Math.min((data.ingresos / maxValue) * 100, 100)}%` }}\n                        title={`Ingresos: ${formatCurrency(data.ingresos)}`}\n                      ></div>\n                      <div \n                        className=\"bg-red-500 rounded-t w-4\"\n                        style={{ height: `${Math.min((data.gastos / maxValue) * 100, 100)}%` }}\n                        title={`Gastos: ${formatCurrency(data.gastos)}`}\n                      ></div>\n                    </div>\n                    <span className=\"text-xs text-gray-600\">{data.month}</span>\n                  </div>\n                ))}\n              </div>\n            );\n          })()}\n          <div className=\"flex justify-center space-x-6 mt-4\">\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-green-500 rounded mr-2\"></div>\n              <span className=\"text-sm text-gray-600\">Ingresos</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-3 h-3 bg-red-500 rounded mr-2\"></div>\n              <span className=\"text-sm text-gray-600\">Gastos</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Expense Distribution */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Distribución de Gastos</h3>\n          <div className=\"space-y-4\">\n            {expenseData.map((expense, index) => (\n              <div key={index} className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div \n                    className=\"w-4 h-4 rounded\"\n                    style={{ backgroundColor: expense.color }}\n                  ></div>\n                  <span className=\"text-sm font-medium text-gray-700\">{expense.category}</span>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm font-semibold text-gray-900\">{formatCurrency(expense.amount)}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {((expense.amount / kpiData.totalExpenses) * 100).toFixed(1)}%\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Financial Indicators */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Liquidez</h3>\n            <i className=\"ri-drop-line text-2xl text-blue-600\"></i>\n          </div>\n          <div className=\"text-3xl font-bold text-blue-600 mb-2\">{kpiData.liquidityRatio.toFixed(1)}</div>\n          <div className=\"text-sm text-gray-600\">Ratio de liquidez corriente</div>\n          <div className=\"mt-4 bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"bg-blue-600 h-2 rounded-full\"\n              style={{ width: `${Math.min((kpiData.liquidityRatio / 3) * 100, 100)}%` }}\n            ></div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Rentabilidad</h3>\n            <i className=\"ri-percent-line text-2xl text-green-600\"></i>\n          </div>\n          <div className=\"text-3xl font-bold text-green-600 mb-2\">{formatPercentage(kpiData.profitMargin)}</div>\n          <div className=\"text-sm text-gray-600\">Margen de utilidad</div>\n          <div className=\"mt-4 bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"bg-green-600 h-2 rounded-full\"\n              style={{ width: `${kpiData.profitMargin}%` }}\n            ></div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 border border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Eficiencia</h3>\n            <i className=\"ri-speed-line text-2xl text-purple-600\"></i>\n          </div>\n          <div className=\"text-3xl font-bold text-purple-600 mb-2\">{formatPercentage(kpiData.efficiency)}</div>\n          <div className=\"text-sm text-gray-600\">Eficiencia operacional</div>\n          <div className=\"mt-4 bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"bg-purple-600 h-2 rounded-full\"\n              style={{ width: `${kpiData.efficiency}%` }}\n            ></div>\n          </div>\n        </div>\n      </div>\n\n      \n    </div>\n  );\n}\n","\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport DashboardLayout from '../../components/layout/DashboardLayout';\nimport BasicDashboard from './components/BasicDashboard';\nimport AdvancedKPIDashboard from './components/AdvancedKPIDashboard';\nimport FeatureGuard from '../../components/common/FeatureGuard';\nimport { usePlanLimitations } from '../../hooks/usePlanLimitations';\nimport { useAuth } from '../../hooks/useAuth';\n\nexport default function DashboardPage() {\n  const [activeView, setActiveView] = useState<'basic' | 'advanced'>('advanced');\n  const { checkFeatureAccess } = usePlanLimitations();\n  const { signOut } = useAuth();\n  const navigate = useNavigate();\n\n  const hasAdvancedDashboard = checkFeatureAccess('hasAdvancedAnalytics');\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      navigate('/login');\n    } catch (error) {\n      console.error('Error al cerrar sesión:', error);\n    }\n  };\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-navy-700 to-navy-800 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold mb-2\">Dashboard</h1>\n              <p className=\"text-navy-200\">Panel de control y métricas de tu empresa</p>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              {/* Dashboard Type Selector */}\n              <div className=\"flex bg-white/10 rounded-lg p-1\">\n                <button\n                  onClick={() => setActiveView('advanced')}\n                  className={`px-4 py-2 rounded-md text-sm font-medium transition-all whitespace-nowrap ${\n                    activeView === 'advanced'\n                      ? 'bg-white text-navy-700 shadow-sm'\n                      : 'text-white hover:bg-white/10'\n                  }`}\n                >\n                  <i className=\"ri-dashboard-3-line mr-2\"></i>\n                  KPI Avanzado\n                </button>\n                <button\n                  onClick={() => setActiveView('basic')}\n                  className={`px-4 py-2 rounded-md text-sm font-medium transition-all whitespace-nowrap ${\n                    activeView === 'basic'\n                      ? 'bg-white text-navy-700 shadow-sm'\n                      : 'text-white hover:bg-white/10'\n                  }`}\n                >\n                  <i className=\"ri-dashboard-line mr-2\"></i>\n                  Básico\n                </button>\n              </div>\n\n              {/* Logout Button */}\n              <button\n                onClick={handleSignOut}\n                className=\"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl whitespace-nowrap\"\n              >\n                <i className=\"ri-logout-box-line mr-2\"></i>\n                Cerrar Sesión\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Dashboard Content */}\n        {activeView === 'advanced' ? (\n          <AdvancedKPIDashboard />\n        ) : (\n          <BasicDashboard />\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n"],"names":["usePlanLimitations","currentPlan","hasAccess","usePlans","getPlanLimitations","limitations","checkFeatureAccess","feature","checkQuantityLimit","currentCount","limit","allowed","message","getFeatureName","currentPlanName","FeatureGuard","children","fallback","showUpgradePrompt","getUpgradeMessage","jsxs","jsx","Link","BasicDashboard","user","useAuth","totalRevenue","setTotalRevenue","useState","totalExpenses","setTotalExpenses","netProfit","setNetProfit","pendingInvoices","setPendingInvoices","pendingAmount","setPendingAmount","useEffect","uid","now","start","end","fromDate","toDate","incomeStmt","invoices","chartAccountsService","invoicesService","revenue","expenses","profit","pendings","inv","status","amount","sum","formatCurrency","AdvancedKPIDashboard","kpiData","setKpiData","chartData","setChartData","expenseData","setExpenseData","cashFlowRes","cashFlow","pendingAmountCalc","profitMargin","prev","formatPercentage","value","maxValue","d","data","index","expense","DashboardPage","activeView","setActiveView","signOut","navigate","useNavigate","handleSignOut","error","DashboardLayout"],"mappings":"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"}