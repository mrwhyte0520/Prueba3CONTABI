import{a as K,u as Q,r as o,c as u,b as y,j as e,D as _}from"./index-CQa-GowG.js";function re(){const f=K(),{user:c}=Q(),[g,E]=o.useState("overview"),[R,w]=o.useState(!0),[S,k]=o.useState([]),[h,T]=o.useState([]),[O,m]=o.useState(!1),[X,ee]=o.useState(!1),[te,ae]=o.useState(""),[D,L]=o.useState(!1),[l,d]=o.useState({entry_number:"",entry_date:new Date().toISOString().split("T")[0],description:"",reference:"",lines:[{account_id:"",description:"",debit:"",credit:""},{account_id:"",description:"",debit:"",credit:""}]});o.useEffect(()=>{$()},[]);const $=async()=>{w(!0);try{const[t,a]=await Promise.all([u.getAll(c?.id||""),y.getAll(c?.id||"")]);k(t),T(a)}catch(t){console.error("Error loading data:",t)}finally{w(!1)}},C=()=>`JE-${Date.now().toString().slice(-6)}`,I=()=>{d(t=>({...t,lines:[...t.lines,{account_id:"",description:"",debit:"",credit:""}]}))},F=t=>{l.lines.length>2&&d(a=>({...a,lines:a.lines.filter((s,r)=>r!==t)}))},p=(t,a,s)=>{d(r=>({...r,lines:r.lines.map((n,i)=>i===t?{...n,[a]:s}:n)}))},A=()=>{const t=l.lines.reduce((s,r)=>s+(parseFloat(r.debit)||0),0),a=l.lines.reduce((s,r)=>s+(parseFloat(r.credit)||0),0);return{totalDebit:t,totalCredit:a}},M=async t=>{t.preventDefault();const{totalDebit:a,totalCredit:s}=A();if(Math.abs(a-s)>.01){alert("Los débitos y créditos deben estar balanceados.");return}try{const r={entry_number:l.entry_number||C(),entry_date:l.entry_date,description:l.description,reference:l.reference,total_debit:a,total_credit:s,status:"posted"},n=l.lines.filter(i=>i.account_id&&(i.debit||i.credit)).map(i=>({account_id:i.account_id,description:i.description,debit_amount:parseFloat(i.debit)||0,credit_amount:parseFloat(i.credit)||0}));await y.createWithLines(c?.id||"",r,n),await $(),d({entry_number:"",entry_date:new Date().toISOString().split("T")[0],description:"",reference:"",lines:[{account_id:"",description:"",debit:"",credit:""},{account_id:"",description:"",debit:"",credit:""}]}),m(!1),alert("Asiento contable creado exitosamente.")}catch(r){console.error("Error creating journal entry:",r),alert("Error al crear el asiento contable. Intente nuevamente.")}},B=async t=>{L(!0);try{const a=new Date().toISOString().split("T")[0],s=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0];let r,n="",i="";switch(t){case"balance-sheet":r=await u.generateBalanceSheet(c?.id||"",a),n=`balance_general_${a}.csv`,i=P(r);break;case"income-statement":r=await u.generateIncomeStatement(c?.id||"",s,a),n=`estado_resultados_${a}.csv`,i=V(r);break;case"trial-balance":r=await u.generateTrialBalance(c?.id||"",a),n=`balanza_comprobacion_${a}.csv`,i=J(r);break;case"cash-flow":r=await u.generateCashFlowStatement(c?.id||"",s,a),n=`flujo_efectivo_${a}.csv`,i=q(r);break;case"general-ledger":const Z=await y.getAll(c?.id||"");n=`mayor_general_${a}.csv`,i=z(Z);break;case"journal-report":const H=await y.getAll(c?.id||"");n=`libro_diario_${a}.csv`,i=U(H);break;default:alert("Tipo de reporte no soportado");return}const Y=new Blob([i],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a"),W=URL.createObjectURL(Y);x.setAttribute("href",W),x.setAttribute("download",n),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x),alert(`Reporte ${G(t)} generado exitosamente.`)}catch(a){console.error("Error generating report:",a),alert("Error al generar el reporte. Intente nuevamente.")}finally{L(!1)}},G=t=>({"balance-sheet":"Balance General","income-statement":"Estado de Resultados","trial-balance":"Balanza de Comprobación","cash-flow":"Flujo de Efectivo","general-ledger":"Mayor General","journal-report":"Libro Diario"})[t]||t,P=t=>{let a=`BALANCE GENERAL
`;return a+=`Al ${new Date(t.asOfDate).toLocaleDateString()}

`,a+=`ACTIVOS
`,a+=`Código,Nombre,Saldo
`,t.assets.forEach(s=>{a+=`${s.code},${s.name},${s.balance.toLocaleString()}
`}),a+=`TOTAL ACTIVOS,,${t.totalAssets.toLocaleString()}

`,a+=`PASIVOS
`,a+=`Código,Nombre,Saldo
`,t.liabilities.forEach(s=>{a+=`${s.code},${s.name},${s.balance.toLocaleString()}
`}),a+=`TOTAL PASIVOS,,${t.totalLiabilities.toLocaleString()}

`,a+=`PATRIMONIO
`,a+=`Código,Nombre,Saldo
`,t.equity.forEach(s=>{a+=`${s.code},${s.name},${s.balance.toLocaleString()}
`}),a+=`TOTAL PATRIMONIO,,${t.totalEquity.toLocaleString()}

`,a+=`TOTAL PASIVOS + PATRIMONIO,,${(t.totalLiabilities+t.totalEquity).toLocaleString()}
`,a},V=t=>{let a=`ESTADO DE RESULTADOS
`;return a+=`Del ${new Date(t.fromDate).toLocaleDateString()} al ${new Date(t.toDate).toLocaleDateString()}

`,a+=`INGRESOS
`,a+=`Código,Nombre,Saldo
`,t.income.forEach(s=>{a+=`${s.code},${s.name},${s.balance.toLocaleString()}
`}),a+=`TOTAL INGRESOS,,${t.totalIncome.toLocaleString()}

`,a+=`GASTOS
`,a+=`Código,Nombre,Saldo
`,t.expenses.forEach(s=>{a+=`${s.code},${s.name},${s.balance.toLocaleString()}
`}),a+=`TOTAL GASTOS,,${t.totalExpenses.toLocaleString()}

`,a+=`UTILIDAD NETA,,${t.netIncome.toLocaleString()}
`,a},J=t=>{let a=`BALANZA DE COMPROBACIÓN
`;return a+=`Al ${new Date(t.asOfDate).toLocaleDateString()}

`,a+=`Código,Nombre,Débito,Crédito
`,t.accounts.forEach(s=>{a+=`${s.code},${s.name},${s.debitBalance.toLocaleString()},${s.creditBalance.toLocaleString()}
`}),a+=`TOTALES,,${t.totalDebits.toLocaleString()},${t.totalCredits.toLocaleString()}
`,a+=`BALANCEADO,,${t.isBalanced?"SÍ":"NO"}
`,a},q=t=>{let a=`ESTADO DE FLUJO DE EFECTIVO
`;return a+=`Del ${new Date(t.fromDate).toLocaleDateString()} al ${new Date(t.toDate).toLocaleDateString()}

`,a+=`Concepto,Monto
`,a+=`Flujo de Efectivo Operativo,${t.operatingCashFlow.toLocaleString()}
`,a+=`Flujo de Efectivo de Inversión,${t.investingCashFlow.toLocaleString()}
`,a+=`Flujo de Efectivo de Financiamiento,${t.financingCashFlow.toLocaleString()}
`,a+=`Flujo Neto de Efectivo,${t.netCashFlow.toLocaleString()}
`,a},z=t=>{let a=`MAYOR GENERAL
`;return a+=`Generado el ${new Date().toLocaleDateString()}

`,a+=`Fecha,Número,Descripción,Cuenta,Débito,Crédito
`,t.forEach(s=>{s.journal_entry_lines?.forEach(r=>{a+=`${new Date(s.entry_date).toLocaleDateString()},${s.entry_number},${s.description},${r.chart_accounts?.code} - ${r.chart_accounts?.name},${(r.debit_amount||0).toLocaleString()},${(r.credit_amount||0).toLocaleString()}
`})}),a},U=t=>{let a=`LIBRO DIARIO
`;return a+=`Generado el ${new Date().toLocaleDateString()}

`,a+=`Fecha,Número,Descripción,Referencia,Débito Total,Crédito Total
`,t.forEach(s=>{a+=`${new Date(s.entry_date).toLocaleDateString()},${s.entry_number},${s.description},${s.reference||""},${s.total_debit.toLocaleString()},${s.total_credit.toLocaleString()}
`}),a},v=t=>S.filter(a=>a.type===t),b=t=>v(t).reduce((a,s)=>a+(s.balance||0),0),{totalDebit:j,totalCredit:N}=A();return R?e.jsx(_,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando datos contables..."})]})})}):e.jsx(_,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contabilidad"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema completo de gestión contable"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Asiento"]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>f("/accounting/general-journal"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Asiento"]}),e.jsxs("button",{onClick:()=>f("/accounting/financial-statements"),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-file-chart-line mr-2"}),"Estados Financieros"]}),e.jsxs("button",{onClick:()=>f("/accounting/bank-reconciliation"),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-bank-line mr-2"}),"Conciliación Bancaria"]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Resumen",icon:"ri-dashboard-line"},{id:"journal",label:"Libro Diario",icon:"ri-book-line"},{id:"ledger",label:"Mayor General",icon:"ri-file-list-line"},{id:"reports",label:"Reportes",icon:"ri-bar-chart-line"}].map(t=>e.jsxs("button",{onClick:()=>E(t.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${g===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${t.icon} mr-2`}),t.label]},t.id))})}),g==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Activos Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$",b("asset").toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("i",{className:"ri-bank-card-line text-2xl text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pasivos Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$",b("liability").toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-pie-chart-line text-2xl text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Patrimonio"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$",b("equity").toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"ri-line-chart-line text-2xl text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ingresos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$",b("income").toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Asientos Recientes"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Débito"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crédito"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.slice(0,5).map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.entry_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.entry_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.description}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.total_debit.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.total_credit.toLocaleString()]})]},t.id))})]}),h.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-file-list-line text-4xl text-gray-300 mb-4 block"}),e.jsx("p",{className:"text-gray-500",children:"No hay asientos contables registrados"})]})]})]})]}),g==="journal"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Libro Diario"}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Asiento"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referencia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Débito"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crédito"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.entry_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.entry_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:t.reference}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.total_debit.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.total_credit.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:t.status})})]},t.id))})]}),h.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-book-line text-4xl text-gray-300 mb-4 block"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No hay asientos en el libro diario"}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Crear Primer Asiento"]})]})]})]}),g==="ledger"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Mayor General"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:["asset","liability","equity","income","expense"].map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 capitalize",children:t==="asset"?"Activos":t==="liability"?"Pasivos":t==="equity"?"Patrimonio":t==="income"?"Ingresos":"Gastos"}),e.jsxs("div",{className:"space-y-2",children:[v(t).slice(0,5).map(a=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[a.code," - ",a.name]}),e.jsxs("span",{className:"font-medium",children:["RD$",(a.balance||0).toLocaleString()]})]},a.id)),v(t).length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No hay cuentas registradas"})]})]},t))})})]}),g==="reports"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reportes Contables"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"balance-sheet",name:"Balance General",icon:"ri-scales-line",description:"Estado de situación financiera"},{id:"income-statement",name:"Estado de Resultados",icon:"ri-line-chart-line",description:"Ingresos y gastos del período"},{id:"cash-flow",name:"Flujo de Efectivo",icon:"ri-money-dollar-circle-line",description:"Movimientos de efectivo"},{id:"trial-balance",name:"Balanza de Comprobación",icon:"ri-calculator-line",description:"Saldos de todas las cuentas"},{id:"general-ledger",name:"Mayor General",icon:"ri-book-open-line",description:"Detalle de movimientos por cuenta"},{id:"journal-report",name:"Libro Diario",icon:"ri-file-list-line",description:"Registro cronológico de asientos"}].map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:e.jsx("i",{className:`${t.icon} text-xl text-blue-600`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.description})]})]}),e.jsx("button",{onClick:()=>B(t.id),disabled:D,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap disabled:opacity-50",children:D?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}),"Generando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Generar Reporte"]})})]},t.id))})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nuevo Asiento Contable"}),e.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Asiento"}),e.jsx("input",{type:"text",value:l.entry_number,onChange:t=>d(a=>({...a,entry_number:t.target.value})),placeholder:C(),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha *"}),e.jsx("input",{type:"date",required:!0,value:l.entry_date,onChange:t=>d(a=>({...a,entry_date:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),e.jsx("input",{type:"text",value:l.reference,onChange:t=>d(a=>({...a,reference:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción *"}),e.jsx("textarea",{required:!0,value:l.description,onChange:t=>d(a=>({...a,description:t.target.value})),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Líneas del Asiento"}),e.jsxs("button",{type:"button",onClick:I,className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Agregar Línea"]})]}),e.jsx("div",{className:"space-y-3",children:l.lines.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 items-center",children:[e.jsx("div",{className:"col-span-4",children:e.jsxs("select",{value:t.account_id,onChange:s=>p(a,"account_id",s.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar cuenta"}),S.filter(s=>s.is_active&&s.allow_posting).map(s=>e.jsxs("option",{value:s.id,children:[s.code," - ",s.name]},s.id))]})}),e.jsx("div",{className:"col-span-3",children:e.jsx("input",{type:"text",value:t.description,onChange:s=>p(a,"description",s.target.value),placeholder:"Descripción",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",step:"0.01",value:t.debit,onChange:s=>p(a,"debit",s.target.value),placeholder:"Débito",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",step:"0.01",value:t.credit,onChange:s=>p(a,"credit",s.target.value),placeholder:"Crédito",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("button",{type:"button",onClick:()=>F(a),disabled:l.lines.length<=2,className:"text-red-600 hover:text-red-900 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx("i",{className:"ri-delete-bin-line"})})})]},a))}),e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Total Débito: "}),e.jsxs("span",{className:"text-blue-600",children:["RD$",j.toLocaleString()]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Total Crédito: "}),e.jsxs("span",{className:"text-green-600",children:["RD$",N.toLocaleString()]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Diferencia: "}),e.jsxs("span",{className:`${Math.abs(j-N)<.01?"text-green-600":"text-red-600"}`,children:["RD$",Math.abs(j-N).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:Math.abs(j-N)>.01,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:"Crear Asiento"})]})]})]})})})]})})}export{re as default};
//# sourceMappingURL=page-Cqc-wZB4.js.map
