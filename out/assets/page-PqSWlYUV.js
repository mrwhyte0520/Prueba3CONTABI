import{a as R,u as A,r as n,j as e,D as j}from"./index-CQa-GowG.js";function F(){const N=R();A();const[c,u]=n.useState([]),[g,b]=n.useState([]),[v,y]=n.useState(!0),[w,d]=n.useState(!1),[k,x]=n.useState(!1),[$,_]=n.useState(null),[p,C]=n.useState("banks"),[r,i]=n.useState({name:"",account_number:"",account_type:"checking",balance:"",currency:"DOP",bank_code:"",swift_code:"",contact_info:""}),[s,l]=n.useState({bank_id:"",transaction_date:new Date().toISOString().split("T")[0],description:"",reference:"",amount:"",transaction_type:"deposit"});n.useEffect(()=>{S()},[]);const S=async()=>{y(!0);try{u([]),b([])}catch(t){console.error("Error loading data:",t)}finally{y(!1)}},T=async t=>{t.preventDefault();try{const a={id:Date.now().toString(),name:r.name,account_number:r.account_number,account_type:r.account_type,balance:parseFloat(r.balance)||0,currency:r.currency,is_active:!0,bank_code:r.bank_code,swift_code:r.swift_code,contact_info:r.contact_info,created_at:new Date().toISOString()};u(o=>[...o,a]),i({name:"",account_number:"",account_type:"checking",balance:"",currency:"DOP",bank_code:"",swift_code:"",contact_info:""}),d(!1),alert("Banco agregado exitosamente.")}catch(a){console.error("Error creating bank:",a),alert("Error al crear el banco. Intente nuevamente.")}},B=async t=>{t.preventDefault();try{const a=parseFloat(s.amount),o=c.find(m=>m.id===s.bank_id);if(!o){alert("Seleccione un banco válido.");return}const f={id:Date.now().toString(),bank_id:s.bank_id,transaction_date:s.transaction_date,description:s.description,reference:s.reference,debit_amount:s.transaction_type==="withdrawal"?a:0,credit_amount:s.transaction_type==="deposit"?a:0,balance:o.balance+(s.transaction_type==="deposit"?a:-a),transaction_type:s.transaction_type,status:"completed"};u(m=>m.map(h=>h.id===s.bank_id?{...h,balance:f.balance}:h)),b(m=>[f,...m]),l({bank_id:"",transaction_date:new Date().toISOString().split("T")[0],description:"",reference:"",amount:"",transaction_type:"deposit"}),x(!1),alert("Transacción registrada exitosamente.")}catch(a){console.error("Error creating transaction:",a),alert("Error al registrar la transacción. Intente nuevamente.")}},D=()=>c.reduce((t,a)=>t+a.balance,0),I=t=>({checking:"Cuenta Corriente",savings:"Cuenta de Ahorros",credit:"Línea de Crédito",investment:"Cuenta de Inversión"})[t]||t,L=t=>({deposit:"Depósito",withdrawal:"Retiro",transfer:"Transferencia",fee:"Comisión",interest:"Interés"})[t]||t;return v?e.jsx(j,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando información bancaria..."})]})})}):e.jsx(j,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión Bancaria"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Administre cuentas bancarias y transacciones"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-bank-line mr-2"}),"Nuevo Banco"]}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-exchange-line mr-2"}),"Nueva Transacción"]}),e.jsxs("button",{onClick:()=>N("/accounting"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Volver"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("i",{className:"ri-bank-line text-2xl text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bancos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Balance Total"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$",D().toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("i",{className:"ri-exchange-line text-2xl text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transacciones"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx("i",{className:"ri-check-line text-2xl text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bancos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.filter(t=>t.is_active).length})]})]})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"banks",label:"Cuentas Bancarias",icon:"ri-bank-line"},{id:"transactions",label:"Transacciones",icon:"ri-exchange-line"}].map(t=>e.jsxs("button",{onClick:()=>C(t.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${p===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${t.icon} mr-2`}),t.label]},t.id))})}),p==="banks"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cuentas Bancarias"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Banco"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número de Cuenta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.bank_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.account_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I(t.account_type)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.balance.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>_(t),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Ver Detalles"})})]},t.id))})]}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-bank-line text-4xl text-gray-300 mb-4 block"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No hay bancos registrados"}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Agregar Primer Banco"]})]})]})]}),p==="transactions"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transacciones Bancarias"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Banco"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Débito"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crédito"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(t=>{const a=c.find(o=>o.id===t.bank_id);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.transaction_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{children:t.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Ref: ",t.reference]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L(t.transaction_type)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:t.debit_amount>0?`RD$${t.debit_amount.toLocaleString()}`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:t.credit_amount>0?`RD$${t.credit_amount.toLocaleString()}`:"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.balance.toLocaleString()]})]},t.id)})})]}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-exchange-line text-4xl text-gray-300 mb-4 block"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No hay transacciones registradas"}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Registrar Primera Transacción"]})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nuevo Banco"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Banco *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:t=>i(a=>({...a,name:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Cuenta *"}),e.jsx("input",{type:"text",required:!0,value:r.account_number,onChange:t=>i(a=>({...a,account_number:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Cuenta *"}),e.jsxs("select",{required:!0,value:r.account_type,onChange:t=>i(a=>({...a,account_type:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"checking",children:"Cuenta Corriente"}),e.jsx("option",{value:"savings",children:"Cuenta de Ahorros"}),e.jsx("option",{value:"credit",children:"Línea de Crédito"}),e.jsx("option",{value:"investment",children:"Cuenta de Inversión"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:r.balance,onChange:t=>i(a=>({...a,balance:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código del Banco"}),e.jsx("input",{type:"text",value:r.bank_code,onChange:t=>i(a=>({...a,bank_code:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código SWIFT"}),e.jsx("input",{type:"text",value:r.swift_code,onChange:t=>i(a=>({...a,swift_code:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Información de Contacto"}),e.jsx("textarea",{value:r.contact_info,onChange:t=>i(a=>({...a,contact_info:t.target.value})),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Crear Banco"})]})]})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Nueva Transacción"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banco *"}),e.jsxs("select",{required:!0,value:s.bank_id,onChange:t=>l(a=>({...a,bank_id:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar banco"}),c.filter(t=>t.is_active).map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.account_number]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha *"}),e.jsx("input",{type:"date",required:!0,value:s.transaction_date,onChange:t=>l(a=>({...a,transaction_date:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción *"}),e.jsx("input",{type:"text",required:!0,value:s.description,onChange:t=>l(a=>({...a,description:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),e.jsx("input",{type:"text",value:s.reference,onChange:t=>l(a=>({...a,reference:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Transacción *"}),e.jsxs("select",{required:!0,value:s.transaction_type,onChange:t=>l(a=>({...a,transaction_type:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"deposit",children:"Depósito"}),e.jsx("option",{value:"withdrawal",children:"Retiro"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"fee",children:"Comisión"}),e.jsx("option",{value:"interest",children:"Interés"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:s.amount,onChange:t=>l(a=>({...a,amount:t.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:"Registrar Transacción"})]})]})]})})})]})})}export{F as default};
//# sourceMappingURL=page-PqSWlYUV.js.map
