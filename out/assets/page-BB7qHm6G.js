import{u as pe,r as i,d as C,j as e,D as J}from"./index-CQa-GowG.js";function Ne(){const{user:b}=pe(),[d,m]=i.useState([]),[X,_]=i.useState(!0),[g,j]=i.useState("dashboard"),[p,A]=i.useState([]),[ee,N]=i.useState(!1),[se,y]=i.useState(!1),[u,F]=i.useState(null),[f,q]=i.useState(null),[v,B]=i.useState(""),[P,V]=i.useState("all"),[D,T]=i.useState("all"),[x,w]=i.useState([]),[te,L]=i.useState(!1),G=i.useRef(null),[a,c]=i.useState({name:"",sku:"",category:"",price:"",cost:"",stock:"",minStock:"",maxStock:"",barcode:"",description:"",supplier:"",imageUrl:"",status:"active"}),[I,R]=i.useState({name:""});i.useEffect(()=>{re()},[b]);const re=async()=>{_(!0);try{if(b){const s=await C.getItems(b.id);if(s&&s.length>0){const t=s.map(r=>({id:r.id,name:r.name,sku:r.sku,category:r.category||"Electrónicos",price:r.selling_price||0,cost:r.cost_price||0,stock:r.current_stock||0,minStock:r.min_stock||0,maxStock:r.max_stock||0,barcode:r.barcode||"",description:r.description||"",supplier:r.supplier||"",imageUrl:r.image_url||"",status:r.is_active?"active":"inactive",createdAt:r.created_at,updatedAt:r.updated_at}));m(t)}else m([])}else m([])}catch(s){console.error("Error loading products:",s),m([])}finally{_(!1)}},h=d.filter(s=>{const t=s.name.toLowerCase().includes(v.toLowerCase())||s.sku.toLowerCase().includes(v.toLowerCase())||s.barcode.includes(v)||s.supplier.toLowerCase().includes(v.toLowerCase()),r=P==="all"||s.category===P,o=D==="all"||D==="low_stock"&&s.stock<=s.minStock||s.status===D;return t&&r&&o}),O=d.length,Q=d.filter(s=>s.status==="active").length,M=d.filter(s=>s.stock<=s.minStock).length,E=d.reduce((s,t)=>s+t.price*t.stock,0),Y=d.reduce((s,t)=>s+t.cost*t.stock,0),ae=E-Y,le=s=>{const t=s.target.files?.[0];if(t){const r=new FileReader;r.onload=o=>{c(l=>({...l,imageUrl:o.target?.result}))},r.readAsDataURL(t)}},oe=async s=>{s.preventDefault();try{const t={id:u?.id||Date.now().toString(),name:a.name,sku:a.sku,category:a.category,price:parseFloat(a.price),cost:parseFloat(a.cost),stock:parseInt(a.stock),minStock:parseInt(a.minStock),maxStock:parseInt(a.maxStock),barcode:a.barcode,description:a.description,supplier:a.supplier,imageUrl:a.imageUrl,status:a.status,createdAt:u?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};if(b){const r={name:a.name,sku:a.sku,category:a.category,selling_price:parseFloat(a.price),cost_price:parseFloat(a.cost),current_stock:parseInt(a.stock),min_stock:parseInt(a.minStock),max_stock:parseInt(a.maxStock),barcode:a.barcode,description:a.description,supplier:a.supplier,image_url:a.imageUrl,is_active:a.status==="active"};u?await C.updateItem(u.id,r):await C.createItem(b.id,r)}m(u?r=>r.map(o=>o.id===u.id?t:o):r=>[...r,t]),U(),N(!1)}catch(t){console.error("Error saving product:",t),alert("Error al guardar el producto. Intente nuevamente.")}},ie=s=>{F(s),c({name:s.name,sku:s.sku,category:s.category,price:s.price.toString(),cost:s.cost.toString(),stock:s.stock.toString(),minStock:s.minStock.toString(),maxStock:s.maxStock.toString(),barcode:s.barcode,description:s.description,supplier:s.supplier,imageUrl:s.imageUrl,status:s.status}),N(!0)},ce=async s=>{if(confirm("¿Está seguro de que desea eliminar este producto?"))try{b&&await C.deleteItem(s),m(t=>t.filter(r=>r.id!==s))}catch(t){console.error("Error deleting product:",t),alert("Error al eliminar el producto. Intente nuevamente.")}},ne=async()=>{if(confirm(`¿Está seguro de que desea eliminar ${x.length} productos seleccionados?`))try{for(const s of x)b&&await C.deleteItem(s);m(s=>s.filter(t=>!x.includes(t.id))),w([]),L(!1)}catch(s){console.error("Error deleting products:",s),alert("Error al eliminar los productos. Intente nuevamente.")}},Z=s=>{m(t=>t.map(r=>x.includes(r.id)?{...r,status:s,updatedAt:new Date().toISOString()}:r)),w([]),L(!1)},H=()=>{const t=[["Nombre","SKU","Categoría","Precio","Costo","Stock","Stock Mín","Stock Máx","Proveedor","Estado"].join(","),...h.map(l=>[`"${l.name}"`,l.sku,l.category,l.price,l.cost,l.stock,l.minStock,l.maxStock,`"${l.supplier}"`,l.status==="active"?"Activo":"Inactivo"].join(","))].join(`
`),r=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download=`productos_${new Date().toISOString().split("T")[0]}.csv`,o.click()},U=()=>{c({name:"",sku:"",category:"",price:"",cost:"",stock:"",minStock:"",maxStock:"",barcode:"",description:"",supplier:"",imageUrl:"",status:"active"}),F(null)},de=()=>{const s=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,5).toUpperCase();return`PRD-${s}-${t}`},me=()=>Math.floor(Math.random()*9e12)+1e12,xe=s=>{w(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},ge=()=>{x.length===h.length?w([]):w(h.map(s=>s.id))};i.useEffect(()=>{L(x.length>0)},[x]);const ue=async s=>{if(s.preventDefault(),!I.name.trim()){alert("Por favor ingrese un nombre para la categoría");return}if(p.some(r=>r.name.toLowerCase()===I.name.trim().toLowerCase())){alert("Esta categoría ya existe");return}try{const r={id:f?.id||Date.now().toString(),name:I.name.trim()};f?(A(o=>o.map(l=>l.id===f.id?r:l)),m(o=>o.map(l=>l.category===f.name?{...l,category:r.name,updatedAt:new Date().toISOString()}:l))):A(o=>[...o,r]),z(),y(!1)}catch(r){console.error("Error saving category:",r),alert("Error al guardar la categoría. Intente nuevamente.")}},he=s=>{q(s),R({name:s.name}),y(!0)},be=s=>{const t=p.find(o=>o.id===s);if(!t)return;const r=d.filter(o=>o.category===t.name);if(r.length>0){alert(`No se puede eliminar la categoría "${t.name}" porque tiene ${r.length} productos asociados. Primero mueva los productos a otra categoría.`);return}confirm(`¿Está seguro de que desea eliminar la categoría "${t.name}"?`)&&A(o=>o.filter(l=>l.id!==s))},z=()=>{R({name:""}),q(null)};return X?e.jsx(J,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando módulo de productos..."})]})})}):e.jsx(J,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>window.REACT_APP_NAVIGATE("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Volver al Inicio"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Productos"})]}),e.jsxs("button",{onClick:()=>{U(),N(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Agregar Producto"]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>j("dashboard"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${g==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-dashboard-line mr-2"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>j("products"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${g==="products"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line mr-2"}),"Productos"]}),e.jsxs("button",{onClick:()=>j("categories"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${g==="categories"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-folder-line mr-2"}),"Categorías"]}),e.jsxs("button",{onClick:()=>j("reports"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${g==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:"ri-file-chart-line mr-2"}),"Reportes"]})]})}),g==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:e.jsx("i",{className:"ri-shopping-bag-line text-2xl text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Productos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:O})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100",children:e.jsx("i",{className:"ri-check-line text-2xl text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Productos Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Q})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-red-100",children:e.jsx("i",{className:"ri-alert-line text-2xl text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Stock Bajo"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:M})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["RD$",E.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen Financiero"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total Inventario"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["RD$",E.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Costo Total"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["RD$",Y.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ganancia Potencial"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["RD$",ae.toLocaleString()]})]})]})]}),M>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-alert-line text-red-600 text-xl mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-800 font-medium",children:"Alerta de Stock Bajo"}),e.jsxs("p",{className:"text-red-700 text-sm",children:[M," productos tienen stock por debajo del mínimo recomendado."]})]}),e.jsx("button",{onClick:()=>{j("products"),T("low_stock")},className:"ml-auto bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm whitespace-nowrap",children:"Ver Productos"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Productos Recientes"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:d.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.imageUrl||"https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=60&height=60&seq=placeholder002&orientation=squarish",alt:s.name,className:"w-12 h-12 object-cover object-top rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.sku})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["RD$",s.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Stock: ",s.stock]})]})]},s.id))})})]})]}),g==="products"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:v,onChange:s=>B(s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar productos..."})]}),e.jsxs("select",{value:P,onChange:s=>V(s.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todas las Categorías"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsxs("select",{value:D,onChange:s=>T(s.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"}),e.jsx("option",{value:"low_stock",children:"Stock Bajo"})]}),e.jsxs("button",{onClick:H,className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Exportar Excel"]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"font-medium",children:h.length}),e.jsx("span",{className:"ml-1",children:"productos"})]})]}),te&&e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-blue-800",children:[x.length," productos seleccionados"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Z("active"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors whitespace-nowrap",children:"Activar"}),e.jsx("button",{onClick:()=>Z("inactive"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors whitespace-nowrap",children:"Desactivar"}),e.jsx("button",{onClick:ne,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors whitespace-nowrap",children:"Eliminar"})]})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx("input",{type:"checkbox",checked:x.length===h.length&&h.length>0,onChange:ge,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-600",children:"Seleccionar todos los productos visibles"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"ri-shopping-bag-line text-6xl text-gray-300 mb-4 block"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay productos registrados"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Comience agregando su primer producto al inventario."}),e.jsxs("button",{onClick:()=>{U(),N(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Agregar Primer Producto"]})]}):h.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-100",children:e.jsx("input",{type:"checkbox",checked:x.includes(s.id),onChange:()=>xe(s.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("div",{className:"w-full h-48 bg-gray-100 overflow-hidden",children:e.jsx("img",{src:s.imageUrl||"https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=300&height=300&seq=placeholder003&orientation=squarish",alt:s.name,className:"w-full h-full object-cover object-top",onError:t=>{const r=t.target;r.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNTAgMTAwQzE2MS4wNDYgMTAwIDE3MCA5MC45NTQzIDE3MCA4MEM1NyA2OS4wNDU3IDE0Ny45NTQgNjAgMTM2IDYwQzEyNC45NTQgNjAgMTE2IDY5LjA0NTcgMTE2IDgwQzExNiA5MC45NTQzIDEyNC45NTQgMTAwIDEzNiAxMDBIMTUwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMTg2IDEyMEgxMTRDMTA3LjM3MyAxMjAgMTAyIDEyNS4zNzMgMTAyIDEzMlYyMDBDMTAyIDIwNi42MjcgMTA3LjM3MyAyMTIgMTE0IDIxMkgxODZDMTkyLjYyNyAyMTIgMTk4IDIwNi4yMjJgMTk0IDIwMFYxMzJDMTk0IDEyNS4zNzMgMTkyLjYyNyAxMjAgMTg2IDEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+"}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.category}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"Activo":"Inactivo"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",s.sku]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["RD$",s.price.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Costo: RD$",s.cost.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${s.stock<=s.minStock?"text-red-600":"text-gray-900"}`,children:["Stock: ",s.stock]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",s.minStock]})]})]}),s.stock<=s.minStock&&e.jsxs("div",{className:"bg-red-50 text-red-700 text-xs p-2 rounded mb-3",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Stock bajo"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>ie(s),className:"flex-1 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Editar"]}),e.jsxs("button",{onClick:()=>ce(s.id),className:"flex-1 bg-red-50 text-red-600 py-2 px-3 rounded-lg hover:bg-red-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Eliminar"]})]})]})]},s.id))})]}),g==="categories"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestión de Categorías"}),e.jsxs("button",{onClick:()=>{z(),y(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Categoría"]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>{const t=d.filter(o=>o.category===s.name),r=t.reduce((o,l)=>o+l.price*l.stock,0);return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-lg",children:s.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>he(s),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar categoría",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>be(s.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Eliminar categoría",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Productos:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor total:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["RD$",r.toLocaleString()]})]}),t.length>0&&e.jsxs("button",{onClick:()=>{j("products"),V(s.name),B(""),T("all")},className:"w-full mt-3 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"Ver Productos"]})]})]},s.id)})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-folder-line text-6xl text-gray-300 mb-4 block"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías registradas"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Comience creando su primera categoría de productos."}),e.jsxs("button",{onClick:()=>{z(),y(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Crear Primera Categoría"]})]})]})]})}),g==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reporte de Inventario"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Exportar lista completa de productos con stock y precios."}),e.jsxs("button",{onClick:H,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Descargar Excel"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Productos con Stock Bajo"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Lista de productos que necesitan reabastecimiento."}),e.jsxs("button",{onClick:()=>{const s=d.filter(n=>n.stock<=n.minStock),r=[["Nombre","SKU","Stock Actual","Stock Mínimo","Diferencia"].join(","),...s.map(n=>[`"${n.name}"`,n.sku,n.stock,n.minStock,n.minStock-n.stock].join(","))].join(`
`),o=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download=`stock_bajo_${new Date().toISOString().split("T")[0]}.csv`,l.click()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-alert-line mr-2"}),"Descargar Reporte"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valorización de Inventario"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Reporte financiero del valor total del inventario."}),e.jsxs("button",{onClick:()=>{const s=["Categoría","Productos","Valor Total","Costo Total","Ganancia"],t=p.map(n=>{const $=d.filter(k=>k.category===n.name),K=$.reduce((k,S)=>k+S.price*S.stock,0),W=$.reduce((k,S)=>k+S.cost*S.stock,0);return[n.name,$.length,K,W,K-W]}),r=[s.join(","),...t.map(n=>n.join(","))].join(`
`),o=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download=`valorizacion_${new Date().toISOString().split("T")[0]}.csv`,l.click()},className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-money-dollar-circle-line mr-2"}),"Descargar Valorización"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estadísticas Generales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:O}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Productos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q}),e.jsx("p",{className:"text-sm text-gray-600",children:"Productos Activos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:M}),e.jsx("p",{className:"text-sm text-gray-600",children:"Stock Bajo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["RD$",E.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"})]})]})]})]}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?"Editar Categoría":"Nueva Categoría"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categoría *"}),e.jsx("input",{type:"text",required:!0,value:I.name,onChange:s=>R(t=>({...t,name:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Electrónicos, Ropa, Hogar..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[f?"Actualizar":"Crear"," Categoría"]})]})]})]})})}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:u?"Editar Producto":"Agregar Producto"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen del Producto"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[a.imageUrl&&e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:a.imageUrl,alt:"Preview",className:"w-full h-full object-cover object-top"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:G,type:"file",accept:"image/*",onChange:le,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>G.current?.click(),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 transition-colors text-center",children:[e.jsx("i",{className:"ri-upload-cloud-line text-2xl text-gray-400 mb-2 block"}),e.jsx("span",{className:"text-sm text-gray-600",children:a.imageUrl?"Cambiar imagen":"Subir imagen"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Producto *"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:s=>c(t=>({...t,name:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",required:!0,value:a.sku,onChange:s=>c(t=>({...t,sku:s.target.value})),className:"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>c(s=>({...s,sku:de()})),className:"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors",children:e.jsx("i",{className:"ri-refresh-line"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),e.jsxs("select",{required:!0,value:a.category,onChange:s=>c(t=>({...t,category:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar categoría"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Barras"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:a.barcode,onChange:s=>c(t=>({...t,barcode:s.target.value})),className:"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>c(s=>({...s,barcode:me().toString()})),className:"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors",children:e.jsx("i",{className:"ri-refresh-line"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Venta *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.price,onChange:s=>c(t=>({...t,price:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Costo *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:a.cost,onChange:s=>c(t=>({...t,cost:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Actual *"}),e.jsx("input",{type:"number",required:!0,value:a.stock,onChange:s=>c(t=>({...t,stock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Mínimo *"}),e.jsx("input",{type:"number",required:!0,value:a.minStock,onChange:s=>c(t=>({...t,minStock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Máximo *"}),e.jsx("input",{type:"number",required:!0,value:a.maxStock,onChange:s=>c(t=>({...t,maxStock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proveedor"}),e.jsx("input",{type:"text",value:a.supplier,onChange:s=>c(t=>({...t,supplier:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{rows:3,value:a.description,onChange:s=>c(t=>({...t,description:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:a.status,onChange:s=>c(t=>({...t,status:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[u?"Actualizar":"Agregar"," Producto"]})]})]})]})})})]})})}export{Ne as default};
//# sourceMappingURL=page-BB7qHm6G.js.map
